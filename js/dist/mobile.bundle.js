!function(){"use strict";var e={config:{swipeThreshold:50,swipeTimeout:300,longPressThreshold:500,pinchThreshold:.02,doubleTapTimeout:300,enableVibration:!0,enableDebug:!1},touches:{startX:0,startY:0,startTime:0,startDistance:0,lastTap:0,longPressTimer:null},handlers:{swipeLeft:[],swipeRight:[],swipeUp:[],swipeDown:[],pinchIn:[],pinchOut:[],longPress:[],doubleTap:[],shake:[]},init:function(){this.isMobile()?(this.setupTouchListeners(),this.setupShakeDetection(),this.setupOrientationDetection(),this.applyMobileOptimizations(),this.log("Mobile gestures initialized")):this.log("Not a mobile device, skipping gesture initialization")},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0},setupTouchListeners:function(){var e=this,t=document.body;t.addEventListener("touchstart",function(t){e.handleTouchStart(t)},{passive:!0}),t.addEventListener("touchmove",function(t){e.handleTouchMove(t)},{passive:!1}),t.addEventListener("touchend",function(t){e.handleTouchEnd(t)},{passive:!0}),t.addEventListener("touchcancel",function(t){e.clearTouchData()},{passive:!0}),this.preventDefaultGestures()},handleTouchStart:function(e){var t=this,n=e.touches[0];this.touches.startX=n.clientX,this.touches.startY=n.clientY,this.touches.startTime=Date.now(),2===e.touches.length&&(this.touches.startDistance=this.getDistance(e.touches[0],e.touches[1])),this.touches.longPressTimer=setTimeout(function(){t.triggerLongPress(e)},this.config.longPressThreshold);var i=Date.now();i-this.touches.lastTap<this.config.doubleTapTimeout&&this.triggerDoubleTap(e),this.touches.lastTap=i},handleTouchMove:function(e){if(this.touches.longPressTimer){var t=e.touches[0],n=Math.abs(t.clientX-this.touches.startX),i=Math.abs(t.clientY-this.touches.startY);(n>10||i>10)&&(clearTimeout(this.touches.longPressTimer),this.touches.longPressTimer=null)}if(2===e.touches.length&&this.touches.startDistance>0){var o=this.getDistance(e.touches[0],e.touches[1])/this.touches.startDistance;Math.abs(1-o)>this.config.pinchThreshold&&(o>1?this.triggerPinchOut(e,o):this.triggerPinchIn(e,o),e.preventDefault())}},handleTouchEnd:function(e){if(this.touches.longPressTimer&&(clearTimeout(this.touches.longPressTimer),this.touches.longPressTimer=null),!(e.touches.length>0)){if(Date.now()-this.touches.startTime<this.config.swipeTimeout){var t=e.changedTouches[0],n=t.clientX-this.touches.startX,i=t.clientY-this.touches.startY;(Math.abs(n)>this.config.swipeThreshold||Math.abs(i)>this.config.swipeThreshold)&&(Math.abs(n)>Math.abs(i)?n>0?this.triggerSwipeRight(e):this.triggerSwipeLeft(e):i>0?this.triggerSwipeDown(e):this.triggerSwipeUp(e))}this.clearTouchData()}},clearTouchData:function(){this.touches.startX=0,this.touches.startY=0,this.touches.startTime=0,this.touches.startDistance=0,this.touches.longPressTimer&&(clearTimeout(this.touches.longPressTimer),this.touches.longPressTimer=null)},getDistance:function(e,t){var n=e.clientX-t.clientX,i=e.clientY-t.clientY;return Math.sqrt(n*n+i*i)},setupShakeDetection:function(){var e=this;if(window.DeviceMotionEvent){var t=0,n=0,i=0,o=0;window.addEventListener("devicemotion",function(s){var a=s.accelerationIncludingGravity;if(a){var r=Date.now();r-o>100&&(o=r,Math.abs(a.x-t)+Math.abs(a.y-n)+Math.abs(a.z-i)>15&&e.triggerShake(s),t=a.x,n=a.y,i=a.z)}})}},setupOrientationDetection:function(){var e=this,t=window.orientation;window.addEventListener("orientationchange",function(){var n=window.orientation;e.handleOrientationChange(t,n),t=n})},applyMobileOptimizations:function(){document.body.classList.add("is-mobile"),this.optimizeTouchTargets(),this.setupPullToRefresh(),this.setupInfiniteScroll(),this.optimizeViewport()},optimizeTouchTargets:function(){document.querySelectorAll('a, button, input, select, textarea, [role="button"]').forEach(function(e){var t=e.getBoundingClientRect();(t.width<44||t.height<44)&&(e.style.minWidth="44px",e.style.minHeight="44px",e.style.padding="8px")})},setupPullToRefresh:function(){var e=this,t=0,n=0,i=!1,o=document.createElement("div");o.className="pull-to-refresh-indicator",o.innerHTML='<div class="spinner"></div>',o.style.cssText="\n        position: fixed;\n        top: -60px;\n        left: 50%;\n        transform: translateX(-50%);\n        width: 40px;\n        height: 40px;\n        background: white;\n        border-radius: 50%;\n        box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: top 0.3s;\n        z-index: 9999;\n      ",document.body.appendChild(o),document.addEventListener("touchstart",function(e){0===window.scrollY&&(t=e.touches[0].clientY,i=!0)}),document.addEventListener("touchmove",function(e){if(i){var s=(n=e.touches[0].clientY)-t;if(s>0&&0===window.scrollY){e.preventDefault();var a=Math.min(s/100,1);o.style.top=60*a-60+"px",s>100?o.classList.add("ready"):o.classList.remove("ready")}}}),document.addEventListener("touchend",function(){i&&(n-t>100&&0===window.scrollY?(o.classList.add("refreshing"),e.triggerPullToRefresh(),setTimeout(function(){o.classList.remove("refreshing","ready"),o.style.top="-60px"},1e3)):o.style.top="-60px",i=!1,t=0,n=0)})},setupInfiniteScroll:function(){var e=this,t=!1,n=document.createElement("div");n.className="infinite-scroll-loader",n.innerHTML='<div class="spinner"></div>',n.style.cssText="\n        text-align: center;\n        padding: 20px;\n        display: none;\n      ",(document.querySelector("main")||document.body).appendChild(n),window.addEventListener("scroll",function(){t||window.scrollY+window.innerHeight>document.documentElement.scrollHeight-200&&(t=!0,n.style.display="block",e.triggerInfiniteScroll(function(){t=!1,n.style.display="none"}))})},optimizeViewport:function(){document.querySelectorAll("input, select, textarea").forEach(function(e){e.addEventListener("focus",function(){document.querySelector('meta[name="viewport"]').setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0")}),e.addEventListener("blur",function(){document.querySelector('meta[name="viewport"]').setAttribute("content","width=device-width, initial-scale=1.0")})})},preventDefaultGestures:function(){document.querySelectorAll("img").forEach(function(e){e.addEventListener("touchmove",function(e){e.touches.length>1&&e.preventDefault()})})},triggerSwipeLeft:function(e){this.vibrate(),this.log("Swipe left detected"),this.executeHandlers("swipeLeft",e)},triggerSwipeRight:function(e){this.vibrate(),this.log("Swipe right detected"),this.executeHandlers("swipeRight",e)},triggerSwipeUp:function(e){this.vibrate(),this.log("Swipe up detected"),this.executeHandlers("swipeUp",e)},triggerSwipeDown:function(e){this.vibrate(),this.log("Swipe down detected"),this.executeHandlers("swipeDown",e)},triggerPinchIn:function(e,t){this.log("Pinch in detected",t),this.executeHandlers("pinchIn",e,t)},triggerPinchOut:function(e,t){this.log("Pinch out detected",t),this.executeHandlers("pinchOut",e,t)},triggerLongPress:function(e){this.vibrate(50),this.log("Long press detected"),this.executeHandlers("longPress",e)},triggerDoubleTap:function(e){this.vibrate(25),this.log("Double tap detected"),this.executeHandlers("doubleTap",e)},triggerShake:function(e){this.log("Shake detected"),this.executeHandlers("shake",e)},triggerPullToRefresh:function(){this.log("Pull to refresh triggered"),setTimeout(function(){window.location.reload()},500)},triggerInfiniteScroll:function(e){this.log("Infinite scroll triggered"),setTimeout(e,1e3)},handleOrientationChange:function(e,t){this.log("Orientation changed from",e,"to",t),document.body.classList.remove("orientation-0","orientation-90","orientation-180","orientation-270"),document.body.classList.add("orientation-"+Math.abs(t))},executeHandlers:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];this.handlers[e].forEach(function(e){try{e.apply(void 0,[t].concat(i))}catch(n){}})},vibrate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;this.config.enableVibration&&navigator.vibrate&&navigator.vibrate(e)},log:function(){if(this.config.enableDebug){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=console).log.apply(e,["[Mobile Gestures]"].concat(n))}},on:function(e,t){this.handlers[e]&&this.handlers[e].push(t)},off:function(e,t){if(this.handlers[e]){var n=this.handlers[e].indexOf(t);n>-1&&this.handlers[e].splice(n,1)}},enable:function(){this.init()},disable:function(){var e=document.body;e.removeEventListener("touchstart",this.handleTouchStart),e.removeEventListener("touchmove",this.handleTouchMove),e.removeEventListener("touchend",this.handleTouchEnd),e.removeEventListener("touchcancel",this.clearTouchData)},getConfig:function(){return Object.assign({},this.config)},setConfig:function(e){Object.assign(this.config,e)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){e.init()}):e.init(),window.MobileGestures=e}(),function(){"use strict";var e={initialized:!1,nav:null,init:function(){!this.initialized&&this.isMobile()&&(this.createNav(),this.setupEventListeners(),this.setupScrollBehavior(),this.highlightCurrentPage(),this.initialized=!0)},isMobile:function(){return window.innerWidth<768},createNav:function(){this.nav=document.createElement("nav"),this.nav.className="mobile-bottom-nav",this.nav.setAttribute("role","navigation"),this.nav.setAttribute("aria-label","モバイルナビゲーション"),this.nav.innerHTML='\n        <a href="/" class="nav-item" aria-label="ホーム" data-page="home">\n          <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>\n            <polyline points="9 22 9 12 15 12 15 22"></polyline>\n          </svg>\n          <span class="nav-label">ホーム</span>\n        </a>\n        \n        <button class="nav-item search-trigger" aria-label="検索" data-page="search">\n          <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n            <circle cx="11" cy="11" r="8"></circle>\n            <path d="m21 21-4.35-4.35"></path>\n          </svg>\n          <span class="nav-label">検索</span>\n        </button>\n        \n        <button class="nav-item tools-trigger" aria-label="学習ツール" data-page="tools">\n          <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n            <path d="M12 2L2 7l10 5 10-5-10-5z"></path>\n            <path d="M2 17l10 5 10-5"></path>\n            <path d="M2 12l10 5 10-5"></path>\n          </svg>\n          <span class="nav-label">学習</span>\n        </button>\n        \n        <a href="/categories/" class="nav-item" aria-label="カテゴリー" data-page="categories">\n          <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>\n          </svg>\n          <span class="nav-label">カテゴリー</span>\n        </a>\n        \n        <button class="nav-item menu-trigger" aria-label="メニュー" data-page="menu">\n          <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n            <line x1="3" y1="12" x2="21" y2="12"></line>\n            <line x1="3" y1="6" x2="21" y2="6"></line>\n            <line x1="3" y1="18" x2="21" y2="18"></line>\n          </svg>\n          <span class="nav-label">メニュー</span>\n        </button>\n      ',document.body.appendChild(this.nav);var e=document.querySelector("main");e&&(e.style.paddingBottom="72px")},setupEventListeners:function(){var e=this;this.nav.querySelector(".search-trigger").addEventListener("click",function(t){t.preventDefault(),e.triggerSearch()}),this.nav.querySelector(".tools-trigger").addEventListener("click",function(t){t.preventDefault(),e.showToolsMenu()}),this.nav.querySelector(".menu-trigger").addEventListener("click",function(t){t.preventDefault(),e.toggleMobileMenu()}),window.addEventListener("resize",function(){!e.isMobile()&&e.nav?e.nav.style.display="none":e.isMobile()&&e.nav&&(e.nav.style.display="flex")})},setupScrollBehavior:function(){var e,t=this,n=0;window.addEventListener("scroll",function(){if(t.isMobile()){clearTimeout(e);var i=window.pageYOffset||document.documentElement.scrollTop;e=setTimeout(function(){i>n&&i>100?t.nav.classList.add("nav-hidden"):t.nav.classList.remove("nav-hidden"),n=i},100)}})},highlightCurrentPage:function(){var e=window.location.pathname;this.nav.querySelectorAll(".nav-item").forEach(function(t){t.classList.remove("nav-active");var n=t.getAttribute("href");n&&(e===n||"/"===n&&"/"===e||"/"!==n&&e.startsWith(n))&&t.classList.add("nav-active")})},triggerSearch:function(){"function"==typeof toggleSearch?toggleSearch():window.location.href="/search/"},showToolsMenu:function(){var e=document.querySelector(".tools-menu-modal");if(e)e.remove();else{var t=document.createElement("div");t.className="tools-menu-modal fixed inset-0 bg-black bg-opacity-75 z-50 flex items-end",t.innerHTML='\n        <div class="tools-menu-content bg-white w-full rounded-t-lg p-4 animate-slide-up">\n          <div class="flex justify-between items-center mb-4">\n            <h3 class="text-lg font-semibold">学習ツール</h3>\n            <button class="close-btn text-gray-500 hover:text-gray-700" aria-label="閉じる">\n              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>\n              </svg>\n            </button>\n          </div>\n          <div class="grid grid-cols-1 gap-3">\n            <a href="/tools/quiz/" class="tool-item flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100">\n              <svg class="w-8 h-8 mr-3 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>\n              </svg>\n              <div>\n                <h4 class="font-medium">敬語クイズ</h4>\n                <p class="text-sm text-gray-600">レベル別の敬語問題に挑戦</p>\n              </div>\n            </a>\n            <a href="/tools/converter/" class="tool-item flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100">\n              <svg class="w-8 h-8 mr-3 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path>\n              </svg>\n              <div>\n                <h4 class="font-medium">敬語変換ツール</h4>\n                <p class="text-sm text-gray-600">日常語を敬語に変換</p>\n              </div>\n            </a>\n            <a href="/tools/examples/" class="tool-item flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100">\n              <svg class="w-8 h-8 mr-3 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>\n              </svg>\n              <div>\n                <h4 class="font-medium">例文集</h4>\n                <p class="text-sm text-gray-600">シーン別の敬語例文</p>\n              </div>\n            </a>\n          </div>\n        </div>\n      ',document.body.appendChild(t),t.querySelector(".close-btn").addEventListener("click",function(){return t.remove()}),t.addEventListener("click",function(e){e.target===t&&t.remove()})}},toggleMobileMenu:function(){var e=document.getElementById("hamburgerbtn");e?e.click():this.createMenuModal()},createMenuModal:function(){var e=document.querySelector(".mobile-menu-modal");if(e)e.remove();else{var t=document.createElement("div");t.className="mobile-menu-modal",t.innerHTML='\n        <div class="menu-backdrop"></div>\n        <div class="menu-content">\n          <button class="menu-close" aria-label="メニューを閉じる">×</button>\n          <nav class="menu-nav">\n            <a href="/">ホーム</a>\n            <a href="/概要/">敬語.jpについて</a>\n            <a href="/categories/">カテゴリー</a>\n            <a href="/tags/">タグ</a>\n            <a href="/お問い合わせ/">お問い合わせ</a>\n          </nav>\n        </div>\n      ',document.body.appendChild(t);var n=t.querySelector(".menu-close"),i=t.querySelector(".menu-backdrop"),o=function(){t.remove()};n.addEventListener("click",o),i.addEventListener("click",o),document.addEventListener("keydown",function(e){"Escape"===e.key&&t&&o()})}}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){return e.init()}):e.init(),window.MobileBottomNav=e}(),function(){"use strict";var e={config:{touchThreshold:10,swipeThreshold:50,doubleTapDelay:300,longPressDelay:500,viewportBreakpoint:768},state:{isTouch:!1,orientation:null,networkType:null,batteryLevel:null,reducedMotion:!1},init:function(){this.isMobile()&&(this.detectCapabilities(),this.setupViewportOptimizations(),this.enhanceTouchInteractions(),this.optimizePerformance(),this.setupOrientationHandling(),this.improveAccessibility(),this.setupNetworkAwareFeatures())},isMobile:function(){return window.innerWidth<this.config.viewportBreakpoint||"ontouchstart"in window||navigator.maxTouchPoints>0},detectCapabilities:function(){var e=this;this.state.isTouch="ontouchstart"in window||navigator.maxTouchPoints>0,this.state.reducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,"connection"in navigator&&(this.state.networkType=navigator.connection.effectiveType),"getBattery"in navigator&&navigator.getBattery().then(function(t){e.state.batteryLevel=t.level,t.addEventListener("levelchange",function(){e.state.batteryLevel=t.level,e.adjustPerformanceSettings()})})},setupViewportOptimizations:function(){var e=this,t=0;document.addEventListener("touchend",function(n){var i=Date.now();i-t<=e.config.doubleTapDelay&&n.preventDefault(),t=i},{passive:!1}),this.fixViewportHeight(),window.addEventListener("resize",this.debounce(function(){return e.fixViewportHeight()},100)),window.addEventListener("orientationchange",function(){return e.fixViewportHeight()})},fixViewportHeight:function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px")),window.innerHeight<500?document.body.classList.add("short-viewport"):document.body.classList.remove("short-viewport")},enhanceTouchInteractions:function(){var e=this;document.addEventListener("touchstart",function(t){var n=t.target.closest("a, button, .touchable");n&&(n.classList.add("touch-active"),"vibrate"in navigator&&!e.state.reducedMotion&&navigator.vibrate(10))},{passive:!0}),document.addEventListener("touchend",function(e){var t=e.target.closest("a, button, .touchable");t&&setTimeout(function(){t.classList.remove("touch-active")},100)},{passive:!0}),this.setupPullToRefresh(),this.setupSwipeNavigation()},setupPullToRefresh:function(){var e=0,t=0,n=!1,i=document.createElement("div");i.className="pull-to-refresh",i.innerHTML='\n        <div class="pull-to-refresh-icon">\n          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">\n            <path d="M21 12a9 9 0 11-6.219-8.56" stroke-width="2" stroke-linecap="round"/>\n            <polyline points="21 4 21 12 13 12" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n          </svg>\n        </div>\n      ',document.body.prepend(i),document.addEventListener("touchstart",function(t){0===window.scrollY&&(e=t.touches[0].pageY,n=!0)},{passive:!0}),document.addEventListener("touchmove",function(o){if(n){var s=(t=o.touches[0].pageY)-e;if(s>0&&0===window.scrollY){o.preventDefault();var a=Math.min(s/80,1),r=.5+.5*a;i.style.opacity=a,i.style.transform="translateY(".concat(Math.min(.5*s,50),"px) scale(").concat(r,")"),s>80?i.classList.add("ready"):i.classList.remove("ready")}}},{passive:!1}),document.addEventListener("touchend",function(){n&&t-e>80?(i.classList.add("refreshing"),setTimeout(function(){window.location.reload()},500)):(i.style.opacity="0",i.style.transform="translateY(0) scale(0.5)",i.classList.remove("ready")),n=!1},{passive:!0})},setupSwipeNavigation:function(){var e=this,t=0,n=0;document.addEventListener("touchstart",function(e){t=e.touches[0].clientX,n=e.touches[0].clientY},{passive:!0}),document.addEventListener("touchend",function(i){var o=i.changedTouches[0].clientX,s=i.changedTouches[0].clientY,a=o-t,r=s-n;Math.abs(a)>Math.abs(r)&&Math.abs(a)>e.config.swipeThreshold&&(a>0&&t<20?window.history.length>1&&window.history.back():a<0&&t>window.innerWidth-20&&window.history.forward())},{passive:!0})},optimizePerformance:function(){this.setupLazyLoading(),this.optimizeScrollEvents(),this.adjustPerformanceSettings(),this.preloadCriticalResources()},setupLazyLoading:function(){var e=document.querySelectorAll("img[data-src]");if("IntersectionObserver"in window){var t=new IntersectionObserver(function(e,t){e.forEach(function(e){if(e.isIntersecting){var n=e.target;n.src=n.dataset.src,n.classList.add("lazy-loaded"),t.unobserve(n)}})},{rootMargin:"50px 0px",threshold:.01});e.forEach(function(e){return t.observe(e)})}else e.forEach(function(e){e.src=e.dataset.src})},optimizeScrollEvents:function(){var e,t=!1;window.addEventListener("scroll",function(){t||(document.body.classList.add("is-scrolling"),t=!0),clearTimeout(e),e=setTimeout(function(){document.body.classList.remove("is-scrolling"),t=!1},150)},{passive:!0})},adjustPerformanceSettings:function(){var e=this.state.batteryLevel<.2,t="2g"===this.state.networkType||"slow-2g"===this.state.networkType;e||t||this.state.reducedMotion?(document.body.classList.add("reduce-animations"),window.MobileGestures&&window.MobileGestures.disable()):document.body.classList.remove("reduce-animations")},preloadCriticalResources:function(){document.querySelectorAll('a[href^="/"]').forEach(function(e){e.addEventListener("touchstart",function(){var t=e.getAttribute("href");if(t&&!document.querySelector('link[rel="prefetch"][href="'.concat(t,'"]'))){var n=document.createElement("link");n.rel="prefetch",n.href=t,document.head.appendChild(n)}},{passive:!0})})},setupOrientationHandling:function(){var e=this,t=function(){var t=window.innerWidth>window.innerHeight?"landscape":"portrait";e.state.orientation=t,document.body.setAttribute("data-orientation",t),"landscape"===t&&window.innerHeight<500?document.body.classList.add("landscape-compact"):document.body.classList.remove("landscape-compact")};t(),window.addEventListener("orientationchange",t),window.addEventListener("resize",this.debounce(t,100))},improveAccessibility:function(){this.state.isTouch&&document.body.classList.add("touch-mode"),document.addEventListener("touchstart",function(){document.body.classList.add("touch-input")},{once:!0}),document.addEventListener("keydown",function(){document.body.classList.remove("touch-input")}),this.addMobileSkipLinks()},addMobileSkipLinks:function(){var e=document.createElement("div");e.className="mobile-skip-links",e.innerHTML='\n        <a href="#main-content" class="skip-link">メインコンテンツへ</a>\n        <a href="#mobile-nav" class="skip-link">ナビゲーションへ</a>\n      ',document.body.prepend(e)},setupNetworkAwareFeatures:function(){var e=this;"connection"in navigator&&navigator.connection.addEventListener("change",function(){e.state.networkType=navigator.connection.effectiveType,e.adjustPerformanceSettings(),"offline"===e.state.networkType&&e.showToast("オフラインです","warning")}),window.addEventListener("online",function(){e.showToast("オンラインに戻りました","success")}),window.addEventListener("offline",function(){e.showToast("オフラインになりました","warning")})},showToast:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=document.createElement("div");n.className="mobile-toast mobile-toast-".concat(t),n.textContent=e,n.setAttribute("role","status"),n.setAttribute("aria-live","polite"),document.body.appendChild(n),requestAnimationFrame(function(){n.classList.add("show")}),setTimeout(function(){n.classList.remove("show"),setTimeout(function(){document.body.removeChild(n)},300)},3e3)},debounce:function(e,t){var n;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];clearTimeout(n),n=setTimeout(function(){clearTimeout(n),e.apply(void 0,o)},t)}}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){return e.init()}):e.init(),window.MobileEnhancements=e}();