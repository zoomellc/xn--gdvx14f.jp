{"version":3,"file":"share-buttons-refactored.js","sourceRoot":"","sources":["../src/share-buttons-refactored.ts"],"names":[],"mappings":"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","sourcesContent":["import { createButton } from './components/ui/Button';\nimport { defaultNotification } from './components/ui/NotificationManager';\n\ndeclare global {\n  interface Window {\n    gtag?: (...args: any[]) => void;\n  }\n}\n\ninterface ShareService {\n  name: string;\n  icon: string;\n  getUrl: (url: string, title: string) => string;\n  color?: string;\n}\n\nclass ShareButtonsManager {\n  private services: ShareService[] = [\n    {\n      name: 'Twitter',\n      icon: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M22.46 6c-.85.38-1.77.64-2.73.76 1-.6 1.76-1.55 2.12-2.68-.93.55-1.96.95-3.06 1.17-.88-.94-2.13-1.53-3.51-1.53-2.66 0-4.81 2.16-4.81 4.81 0 .38.04.75.13 1.1-4-.2-7.54-2.11-9.91-5.02-.41.71-.65 1.53-.65 2.4 0 1.67.85 3.14 2.14 4.01-.79-.03-1.54-.24-2.19-.6v.06c0 2.33 1.66 4.28 3.86 4.72-.4.11-.83.17-1.27.17-.31 0-.62-.03-.92-.08.62 1.91 2.39 3.3 4.5 3.34-1.65 1.29-3.73 2.06-5.99 2.06-.39 0-.77-.02-1.15-.07 2.13 1.37 4.66 2.16 7.38 2.16 8.85 0 13.69-7.33 13.69-13.69 0-.21 0-.41-.01-.62.94-.68 1.76-1.53 2.4-2.5z\"/></svg>',\n      getUrl: (url, title) => `https://twitter.com/intent/tweet?text=${encodeURIComponent(title)}&url=${encodeURIComponent(url)}`,\n      color: '#1DA1F2'\n    },\n    {\n      name: 'Facebook',\n      icon: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"/></svg>',\n      getUrl: (url) => `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`,\n      color: '#1877F2'\n    },\n    {\n      name: 'LINE',\n      icon: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314\"/></svg>',\n      getUrl: (url, title) => `https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(url)}&text=${encodeURIComponent(title)}`,\n      color: '#00B900'\n    }\n  ];\n\n  constructor() {\n    this.init();\n  }\n\n  private init(): void {\n    if (typeof document === 'undefined') return;\n    \n    document.addEventListener('DOMContentLoaded', () => {\n      this.setupShareButtons();\n    });\n  }\n\n  private setupShareButtons(): void {\n    const containers = document.querySelectorAll('.share-buttons');\n    \n    containers.forEach(container => {\n      const url = container.getAttribute('data-url') || window.location.href;\n      const title = container.getAttribute('data-title') || document.title;\n      \n      // Clear existing content\n      container.innerHTML = '';\n      \n      // Add share buttons\n      this.services.forEach(service => {\n        const button = createButton({\n          icon: service.icon,\n          variant: 'icon',\n          size: 'medium',\n          className: 'share-button',\n          ariaLabel: `${service.name}でシェア`,\n          tooltip: `${service.name}でシェア`,\n          tooltipPosition: 'top',\n          onClick: () => this.share(service, url, title)\n        });\n        \n        // Apply custom styles\n        const element = button.getElement();\n        element.style.color = service.color || '#666';\n        element.style.padding = '8px';\n        \n        button.appendTo(container as HTMLElement);\n      });\n      \n      // Add native share button if supported\n      if ('share' in navigator) {\n        const nativeButton = createButton({\n          icon: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z\"/></svg>',\n          variant: 'icon',\n          size: 'medium',\n          className: 'share-button share-native',\n          ariaLabel: 'シェア',\n          tooltip: 'シェア',\n          tooltipPosition: 'top',\n          onClick: () => this.nativeShare(url, title)\n        });\n        \n        nativeButton.appendTo(container as HTMLElement);\n      }\n      \n      // Add copy link button\n      const copyButton = createButton({\n        icon: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z\"/></svg>',\n        variant: 'icon',\n        size: 'medium',\n        className: 'share-button share-copy',\n        ariaLabel: 'リンクをコピー',\n        tooltip: 'リンクをコピー',\n        tooltipPosition: 'top',\n        onClick: () => this.copyLink(url)\n      });\n      \n      copyButton.appendTo(container as HTMLElement);\n    });\n  }\n\n  private share(service: ShareService, url: string, title: string): void {\n    const shareUrl = service.getUrl(url, title);\n    window.open(shareUrl, '_blank', 'width=600,height=400,menubar=no,toolbar=no,resizable=yes');\n    \n    // Track share event if analytics is available\n    if (typeof window.gtag !== 'undefined') {\n      window.gtag('event', 'share', {\n        method: service.name,\n        content_type: 'article',\n        item_id: url\n      });\n    }\n  }\n\n  private async nativeShare(url: string, title: string): Promise<void> {\n    try {\n      await navigator.share({\n        title: title,\n        url: url\n      });\n      \n      defaultNotification.success('シェアしました');\n    } catch (error) {\n      if ((error as Error).name !== 'AbortError') {\n        console.error('Share failed:', error);\n        defaultNotification.error('シェアに失敗しました');\n      }\n    }\n  }\n\n  private async copyLink(url: string): Promise<void> {\n    try {\n      await navigator.clipboard.writeText(url);\n      defaultNotification.success('リンクをコピーしました', {\n        duration: 2000\n      });\n    } catch (error) {\n      console.error('Copy failed:', error);\n      \n      // Fallback for older browsers\n      const textarea = document.createElement('textarea');\n      textarea.value = url;\n      textarea.style.position = 'fixed';\n      textarea.style.opacity = '0';\n      document.body.appendChild(textarea);\n      textarea.select();\n      \n      try {\n        document.execCommand('copy');\n        defaultNotification.success('リンクをコピーしました', {\n          duration: 2000\n        });\n      } catch (e) {\n        defaultNotification.error('コピーに失敗しました');\n      }\n      \n      document.body.removeChild(textarea);\n    }\n  }\n\n  public addService(service: ShareService): void {\n    this.services.push(service);\n    this.setupShareButtons();\n  }\n\n  public removeService(name: string): void {\n    this.services = this.services.filter(s => s.name !== name);\n    this.setupShareButtons();\n  }\n}\n\n// Initialize and export\nconst shareButtons = new ShareButtonsManager();\n(window as any).ShareButtons = shareButtons;\n\nexport default shareButtons;"]}