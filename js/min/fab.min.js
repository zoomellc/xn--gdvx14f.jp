!function(){"use strict";const t={button:null,isVisible:!0,lastScrollTop:0,scrollThreshold:100,init(){window.innerWidth>=768||(this.create(),this.setupScrollBehavior(),this.setupPageSpecificBehavior())},create(){const t=document.createElement("div");t.className="fab-container",this.button=document.createElement("button"),this.button.className="fab fab-main",this.button.setAttribute("aria-label","アクション"),t.appendChild(this.button),document.body.appendChild(t),this.updateIcon(),this.isVisible=!1},updateIcon(){const t=window.location.pathname;let e="",i="";"/"===t||t.includes("/page/")?(e='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                  <circle cx="11" cy="11" r="8"></circle>\n                  <path d="m21 21-4.35-4.35"></path>\n                </svg>',i="検索",this.button.onclick=()=>this.triggerSearch()):t.includes("/categories/")||t.includes("/tags/")?(e='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                  <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>\n                </svg>',i="フィルター",this.button.onclick=()=>this.showFilterOptions()):document.querySelector(".toc, #TableOfContents")?(e='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                    <line x1="8" y1="6" x2="21" y2="6"></line>\n                    <line x1="8" y1="12" x2="21" y2="12"></line>\n                    <line x1="8" y1="18" x2="21" y2="18"></line>\n                    <line x1="3" y1="6" x2="3.01" y2="6"></line>\n                    <line x1="3" y1="12" x2="3.01" y2="12"></line>\n                    <line x1="3" y1="18" x2="3.01" y2="18"></line>\n                  </svg>',i="目次",this.button.onclick=()=>this.showTableOfContents()):(e='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                    <line x1="12" y1="19" x2="12" y2="5"></line>\n                    <polyline points="5 12 12 5 19 12"></polyline>\n                  </svg>',i="トップへ",this.button.onclick=()=>this.scrollToTop()),this.button.innerHTML=e,this.button.setAttribute("aria-label",i)},setupScrollBehavior(){let t;window.addEventListener("scroll",()=>{clearTimeout(t);const e=window.pageYOffset||document.documentElement.scrollTop;Math.abs(e-this.lastScrollTop)>5&&this.hide(),t=setTimeout(()=>{if(e>this.scrollThreshold)this.show();else if(e<=this.scrollThreshold){const t=window.location.pathname;t.includes("/categories/")||t.includes("/tags/")||"/"===t||this.hide()}this.lastScrollTop=e},150)})},setupPageSpecificBehavior(){new MutationObserver(()=>{this.updateIcon()}).observe(document.body,{childList:!0,subtree:!0})},show(){this.button&&!this.isVisible&&(this.button.classList.add("fab-visible"),this.isVisible=!0)},hide(){this.button&&this.isVisible&&(this.button.classList.remove("fab-visible"),this.isVisible=!1)},triggerSearch(){const t=document.querySelector(".search-modal");if(t)t.classList.add("active");else{const t=document.querySelector(".mobile-bottom-nav .search-trigger");t&&t.click()}},showTableOfContents(){const t=document.querySelector(".toc-modal");if(t)return void t.remove();const e=document.querySelector(".toc, #TableOfContents");if(!e)return;const i=document.createElement("div");i.className="toc-modal",i.innerHTML=`\n        <div class="toc-backdrop"></div>\n        <div class="toc-content">\n          <div class="toc-header">\n            <h3>目次</h3>\n            <button class="toc-close" aria-label="閉じる">×</button>\n          </div>\n          <div class="toc-body">\n            ${e.innerHTML}\n          </div>\n        </div>\n      `,document.body.appendChild(i);const o=i.querySelector(".toc-close"),n=i.querySelector(".toc-backdrop"),s=()=>{i.remove()};o.addEventListener("click",s),n.addEventListener("click",s),i.querySelectorAll("a").forEach(t=>{t.addEventListener("click",()=>{setTimeout(s,300)})})},showFilterOptions(){console.log("Filter options - to be implemented")},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>t.init()):t.init(),window.addEventListener("resize",()=>{window.innerWidth>=768&&t.button?(t.button.remove(),t.button=null):window.innerWidth<768&&!t.button&&t.init()}),window.FAB=t}();