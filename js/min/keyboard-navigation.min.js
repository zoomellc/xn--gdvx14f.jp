!function(){"use strict";let t=null;const e={h:()=>i("header"),m:()=>i("main"),f:()=>i("footer"),s:()=>c(),"/":()=>c(),g:{h:()=>window.location.href="/",a:()=>s("概要"),c:()=>s("お問い合わせ")}};let n=null,o=null;function r(t){if(!l()){if(n&&e[n]&&e[n][t.key])return t.preventDefault(),e[n][t.key](),void u();e[t.key]&&(t.preventDefault(),"function"==typeof e[t.key]?e[t.key]():(n=t.key,function(t){const e=document.createElement("div");e.className="shortcut-hint",e.textContent=`ショートカットモード: ${t}... (h=ホーム, a=概要, c=お問い合わせ)`,document.body.appendChild(e),setTimeout(()=>e.remove(),2e3)}(t.key),o=setTimeout(u,2e3))),t.key.startsWith("Arrow")&&t.target.closest("article")&&function(t){const e=Array.from(document.querySelectorAll("article")),n=t.target.closest("article"),o=e.indexOf(n);let r=o;switch(t.key){case"ArrowUp":case"ArrowLeft":r=Math.max(0,o-1);break;case"ArrowDown":case"ArrowRight":r=Math.min(e.length-1,o+1)}if(r!==o){t.preventDefault();const n=e[r].querySelector("a");n&&n.focus()}}(t),"Enter"===t.key&&t.target.hasAttribute("role")&&"button"===t.target.getAttribute("role")&&t.target.click()}}function a(e){t=e.target,e.target.classList.add("keyboard-focused"),function(t){let e=document.getElementById("keyboard-announcer");e||(e=document.createElement("div"),e.id="keyboard-announcer",e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),e.className="sr-only",document.body.appendChild(e));const n=t.getAttribute("aria-label")||t.textContent;n&&(e.textContent=`フォーカス: ${n}`)}(e.target)}function d(t){t.target.classList.remove("keyboard-focused")}function i(t){const e=document.querySelector(t);if(e){e.scrollIntoView({behavior:"smooth",block:"start"});const t=e.querySelector('a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"]), [contenteditable="true"]');t?t.focus():e.hasAttribute("tabindex")&&e.focus()}}function s(t){const e=Array.from(document.querySelectorAll("a")).find(e=>e.textContent.includes(t));e&&(e.focus(),e.scrollIntoView({behavior:"smooth",block:"center"}))}function c(){const t=document.querySelector('input[type="search"], input[name="search"], input[placeholder*="検索"]');t&&(t.focus(),t.select())}function l(){const t=document.activeElement;return t&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||"true"===t.contentEditable)}function u(){n=null,o&&(clearTimeout(o),o=null)}document.addEventListener("DOMContentLoaded",function(){document.addEventListener("keydown",r),document.addEventListener("focusin",a),document.addEventListener("focusout",d),new MutationObserver(function(t){t.forEach(function(t){if("attributes"===t.type&&"class"===t.attributeName){const e=t.target;e.classList.contains("hidden")||"none"===e.style.display?e.setAttribute("tabindex","-1"):e.removeAttribute("tabindex")}})}).observe(document.body,{attributes:!0,subtree:!0,attributeFilter:["class","style"]}),document.querySelectorAll("form").forEach(t=>{t.addEventListener("keydown",function(e){if("Enter"===e.key&&"TEXTAREA"!==e.target.tagName){const n=Array.from(t.querySelectorAll('input:not([type="submit"]), select, textarea')),o=n.indexOf(e.target);o<n.length-1&&(e.preventDefault(),n[o+1].focus())}})}),function(){if(!document.querySelector(".skip-link")){const t=document.createElement("nav");t.setAttribute("aria-label","スキップリンク"),t.className="skip-links",t.innerHTML='\n                <a href="#main-content" class="skip-link">メインコンテンツへ</a>\n                <a href="#sidebar" class="skip-link">サイドバーへ</a>\n                <a href="#footer" class="skip-link">フッターへ</a>\n            ',document.body.insertBefore(t,document.body.firstChild)}}(),function(){const t=document.createElement("style");t.textContent="\n            .keyboard-focused {\n                outline: 3px solid #4299e1 !important;\n                outline-offset: 3px !important;\n                box-shadow: 0 0 0 6px rgba(66, 153, 225, 0.2) !important;\n                transition: all 0.2s ease !important;\n            }\n            \n            .skip-links {\n                position: absolute;\n                top: -40px;\n                left: 0;\n                background: white;\n                z-index: 9999;\n            }\n            \n            .skip-link:focus {\n                position: absolute;\n                top: 0;\n                left: 0;\n                background: white;\n                padding: 8px 16px;\n                text-decoration: none;\n                color: #1a202c;\n                border: 2px solid #4299e1;\n                border-radius: 4px;\n                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n            }\n            \n            .shortcut-hint {\n                position: fixed;\n                bottom: 20px;\n                right: 20px;\n                background: rgba(0, 0, 0, 0.8);\n                color: white;\n                padding: 12px 20px;\n                border-radius: 8px;\n                font-size: 14px;\n                z-index: 9999;\n                animation: fadeIn 0.3s ease;\n            }\n            \n            @keyframes fadeIn {\n                from { opacity: 0; transform: translateY(10px); }\n                to { opacity: 1; transform: translateY(0); }\n            }\n            \n            @media (prefers-reduced-motion: reduce) {\n                * {\n                    animation: none !important;\n                    transition: none !important;\n                }\n            }\n        ",document.head.appendChild(t)}()}),document.addEventListener("keydown",function(t){"?"!==t.key||l()||(t.preventDefault(),function(){const t=document.createElement("div");t.innerHTML='\n            <div class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">\n                <div class="bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full" role="dialog" aria-label="キーボードショートカット">\n                    <h2 class="text-xl font-bold mb-4">キーボードショートカット</h2>\n                    <table class="w-full text-sm">\n                        <tr><td class="py-1"><kbd class="px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded">?</kbd></td><td>このヘルプを表示</td></tr>\n                        <tr><td class="py-1"><kbd class="px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded">h</kbd></td><td>ヘッダーへ移動</td></tr>\n                        <tr><td class="py-1"><kbd class="px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded">m</kbd></td><td>メインコンテンツへ移動</td></tr>\n                        <tr><td class="py-1"><kbd class="px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded">f</kbd></td><td>フッターへ移動</td></tr>\n                        <tr><td class="py-1"><kbd class="px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded">/</kbd></td><td>検索にフォーカス</td></tr>\n                        <tr><td class="py-1"><kbd class="px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded">g h</kbd></td><td>ホームへ移動</td></tr>\n                        <tr><td class="py-1"><kbd class="px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded">Esc</kbd></td><td>ダイアログを閉じる</td></tr>\n                    </table>\n                    <button class="mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">\n                        閉じる\n                    </button>\n                </div>\n            </div>\n        ',document.body.appendChild(t);const e=t.querySelector("button");e.focus(),e.addEventListener("click",()=>t.remove()),t.addEventListener("keydown",function(e){"Escape"===e.key&&t.remove()})}())})}();