(()=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,s,i=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==e);c=!0);}catch(t){l=!0,a=t}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function r(){var t,e,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.toStringTag||"@@toStringTag";function i(n,r,o,s){var i=r&&r.prototype instanceof l?r:l,u=Object.create(i.prototype);return a(u,"_invoke",function(n,r,a){var o,s,i,l=0,u=a||[],d=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(e,n){return o=e,s=0,i=t,p.n=n,c}};function v(n,r){for(s=n,i=r,e=0;!d&&l&&!a&&e<u.length;e++){var a,o=u[e],v=p.p,y=o[2];n>3?(a=y===r)&&(i=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=v&&((a=n<2&&v<o[1])?(s=0,p.v=r,p.n=o[1]):v<y&&(a=n<3||o[0]>r||r>y)&&(o[4]=n,o[5]=r,p.n=y,s=0))}if(a||n>1)return c;throw d=!0,r}return function(a,u,y){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&v(u,y),s=u,i=y;(e=s<2?t:i)||!d;){o||(s?s<3?(s>1&&(p.n=-1),v(s,i)):p.n=i:p.v=i);try{if(l=2,o){if(s||(a="next"),e=o[a]){if(!(e=e.call(o,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=t}else if((e=(d=p.n<0)?i:n.call(r,p))!==c)break}catch(e){o=t,s=1,i=e}finally{l=1}}return{value:e,done:d}}}(n,o,s),!0),u}var c={};function l(){}function u(){}function d(){}e=Object.getPrototypeOf;var p=[][o]?e(e([][o]())):(a(e={},o,function(){return this}),e),v=d.prototype=l.prototype=Object.create(p);function y(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t}return u.prototype=d,a(v,"constructor",d),a(d,"constructor",u),u.displayName="GeneratorFunction",a(d,s,"GeneratorFunction"),a(v),a(v,s,"Generator"),a(v,o,function(){return this}),a(v,"toString",function(){return"[object Generator]"}),(r=function(){return{w:i,m:y}})()}function a(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}a=function(t,e,n,r){function s(e,n){a(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(s("next",0),s("throw",1),s("return",2))},a(t,e,n,r)}function o(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function s(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var s=t.apply(e,n);function i(t){o(s,r,a,i,c,"next",t)}function c(t){o(s,r,a,i,c,"throw",t)}i(void 0)})}}function i(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}!function(){"use strict";var t=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.conversionRules=null,this.conversionHistory=[],this.maxHistoryItems=50,this.storageKey="honorificConverterHistory",this.init()},n=[{key:"init",value:(o=s(r().m(function t(){return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.loadConversionRules();case 1:this.loadHistory(),this.setupUI(),this.attachEventListeners(),t.n=3;break;case 2:t.p=2,t.v;case 3:return t.a(2)}},t,this,[[0,2]])})),function(){return o.apply(this,arguments)})},{key:"loadConversionRules",value:(a=s(r().m(function t(){var e,n;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,fetch("/data/honorific-conversion-rules.json");case 1:return e=t.v,t.n=2,e.json();case 2:n=t.v,this.conversionRules=n,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,this,[[0,3]])})),function(){return a.apply(this,arguments)})},{key:"loadHistory",value:function(){var t=localStorage.getItem(this.storageKey);t&&(this.conversionHistory=JSON.parse(t))}},{key:"saveHistory",value:function(){localStorage.setItem(this.storageKey,JSON.stringify(this.conversionHistory))}},{key:"addToHistory",value:function(t,e,n){var r={original:t,converted:e,type:n,timestamp:(new Date).toISOString()};this.conversionHistory.unshift(r),this.conversionHistory.length>this.maxHistoryItems&&(this.conversionHistory=this.conversionHistory.slice(0,this.maxHistoryItems)),this.saveHistory(),this.updateHistoryDisplay()}},{key:"setupUI",value:function(){var t=this;document.querySelectorAll(".honorific-converter-tool").forEach(function(e){e.innerHTML='\n                    <div class="converter-container">\n                        <div class="converter-header mb-6">\n                            <h3 class="text-2xl font-bold text-gray-800 dark:text-gray-200 mb-4">敬語変換ツール</h3>\n                            <p class="text-gray-600 dark:text-gray-400">文章を入力すると、リアルタイムで敬語に変換します</p>\n                        </div>\n                        \n                        <div class="conversion-type-selector mb-4">\n                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">\n                                変換タイプを選択\n                            </label>\n                            <div class="flex gap-2 flex-wrap">\n                                <button class="type-btn px-4 py-2 rounded-lg border-2 transition-all duration-200 text-sm" data-type="尊敬語">\n                                    尊敬語\n                                </button>\n                                <button class="type-btn px-4 py-2 rounded-lg border-2 transition-all duration-200 text-sm" data-type="謙譲語">\n                                    謙譲語\n                                </button>\n                                <button class="type-btn px-4 py-2 rounded-lg border-2 transition-all duration-200 text-sm active" data-type="丁寧語">\n                                    丁寧語\n                                </button>\n                                <button class="type-btn px-4 py-2 rounded-lg border-2 transition-all duration-200 text-sm" data-type="auto">\n                                    自動判定\n                                </button>\n                            </div>\n                        </div>\n                        \n                        <div class="converter-input-area mb-6">\n                            <div class="grid md:grid-cols-2 gap-4">\n                                <div>\n                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">\n                                        入力文章\n                                    </label>\n                                    <textarea \n                                        class="input-text w-full p-4 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:border-blue-500 dark:focus:border-blue-400 transition-colors duration-200 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200"\n                                        rows="6"\n                                        placeholder="ここに文章を入力してください..."\n                                    ></textarea>\n                                    <div class="mt-2 text-sm text-gray-500 dark:text-gray-400">\n                                        <span class="char-count">0</span> 文字\n                                    </div>\n                                </div>\n                                \n                                <div>\n                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">\n                                        変換結果\n                                    </label>\n                                    <div class="output-text w-full p-4 border-2 border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-900 min-h-[152px] text-gray-800 dark:text-gray-200">\n                                        <span class="text-gray-400 dark:text-gray-600">変換結果がここに表示されます</span>\n                                    </div>\n                                    <div class="mt-2 flex justify-between">\n                                        <button class="copy-btn text-sm text-blue-600 dark:text-blue-400 hover:underline disabled:opacity-50 disabled:cursor-not-allowed" disabled>\n                                            コピー\n                                        </button>\n                                        <button class="clear-btn text-sm text-red-600 dark:text-red-400 hover:underline">\n                                            クリア\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        \n                        <div class="template-section mb-6">\n                            <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3">よく使われる例文</h4>\n                            <div class="template-tabs mb-3">\n                                <button class="template-tab px-4 py-2 text-sm border-b-2 transition-colors duration-200 active" data-category="ビジネスメール">\n                                    ビジネスメール\n                                </button>\n                                <button class="template-tab px-4 py-2 text-sm border-b-2 transition-colors duration-200" data-category="電話応対">\n                                    電話応対\n                                </button>\n                                <button class="template-tab px-4 py-2 text-sm border-b-2 transition-colors duration-200" data-category="日常会話">\n                                    日常会話\n                                </button>\n                            </div>\n                            <div class="template-content grid grid-cols-1 md:grid-cols-2 gap-2">\n                                \x3c!-- テンプレートが動的に挿入されます --\x3e\n                            </div>\n                        </div>\n                        \n                        <div class="history-section">\n                            <div class="flex justify-between items-center mb-3">\n                                <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-200">変換履歴</h4>\n                                <button class="clear-history-btn text-sm text-red-600 dark:text-red-400 hover:underline">\n                                    履歴をクリア\n                                </button>\n                            </div>\n                            <div class="history-list max-h-64 overflow-y-auto space-y-2">\n                                \x3c!-- 履歴が動的に挿入されます --\x3e\n                            </div>\n                        </div>\n                    </div>\n                ',t.updateTemplates("ビジネスメール"),t.updateHistoryDisplay()})}},{key:"attachEventListeners",value:function(){var t=this;document.addEventListener("input",function(e){e.target.matches(".input-text")&&t.handleInput(e.target)}),document.addEventListener("click",function(e){e.target.matches(".type-btn")?t.selectConversionType(e.target):e.target.matches(".copy-btn")?t.copyResult():e.target.matches(".clear-btn")?t.clearInput():e.target.matches(".template-tab")?t.selectTemplateCategory(e.target):e.target.matches(".template-btn")?t.applyTemplate(e.target):e.target.matches(".history-item")?t.applyHistoryItem(e.target):e.target.matches(".clear-history-btn")&&t.clearHistory()})}},{key:"handleInput",value:function(t){var e=t.value;t.closest(".converter-input-area").querySelector(".char-count").textContent=e.length,e.trim()?this.convertText(e):this.clearOutput()}},{key:"convertText",value:function(t){var e,n=document.querySelector(".type-btn.active").dataset.type;e="auto"===n?this.autoConvert(t):this.convertByType(t,n),this.updateOutput(e),e!==t&&(document.querySelector(".copy-btn").disabled=!1)}},{key:"convertByType",value:function(t,n){if(!this.conversionRules||!this.conversionRules.conversionRules[n])return t;var r=t,a=this.conversionRules.conversionRules[n];return Object.entries(a).forEach(function(t){var n=e(t,2),a=n[0],o=n[1][0],s=new RegExp(a,"g");r=r.replace(s,o)}),this.conversionRules.commonPhrases&&Object.entries(this.conversionRules.commonPhrases).forEach(function(t){var n=e(t,2),a=n[0],o=n[1][0],s=new RegExp(a,"g");r=r.replace(s,o)}),r}},{key:"autoConvert",value:function(t){var e=t;return this.convertByType(e,"丁寧語")}},{key:"updateOutput",value:function(t){document.querySelector(".output-text").innerHTML=this.highlightChanges(t)}},{key:"highlightChanges",value:function(t){var e=this;return t.split("\n").map(function(t){return"<span>".concat(e.escapeHtml(t),"</span>")}).join("<br>")}},{key:"escapeHtml",value:function(t){var e=document.createElement("div");return e.textContent=t,e.innerHTML}},{key:"clearOutput",value:function(){document.querySelector(".output-text").innerHTML='<span class="text-gray-400 dark:text-gray-600">変換結果がここに表示されます</span>',document.querySelector(".copy-btn").disabled=!0}},{key:"selectConversionType",value:function(t){document.querySelectorAll(".type-btn").forEach(function(t){t.classList.remove("active","bg-blue-500","text-white","border-blue-500"),t.classList.add("border-gray-300","dark:border-gray-600")}),t.classList.add("active","bg-blue-500","text-white","border-blue-500"),t.classList.remove("border-gray-300","dark:border-gray-600");var e=document.querySelector(".input-text").value;e.trim()&&this.convertText(e)}},{key:"copyResult",value:function(){var t=this,e=document.querySelector(".output-text").textContent;navigator.clipboard.writeText(e).then(function(){var n=document.querySelector(".copy-btn"),r=n.textContent;n.textContent="コピーしました！",setTimeout(function(){n.textContent=r},2e3);var a=document.querySelector(".input-text").value,o=document.querySelector(".type-btn.active").dataset.type;t.addToHistory(a,e,o)}).catch(function(t){})}},{key:"clearInput",value:function(){document.querySelector(".input-text").value="",document.querySelector(".char-count").textContent="0",this.clearOutput()}},{key:"selectTemplateCategory",value:function(t){document.querySelectorAll(".template-tab").forEach(function(t){t.classList.remove("active","border-blue-500","text-blue-600","dark:text-blue-400"),t.classList.add("border-transparent")}),t.classList.add("active","border-blue-500","text-blue-600","dark:text-blue-400"),t.classList.remove("border-transparent"),this.updateTemplates(t.dataset.category)}},{key:"updateTemplates",value:function(t){var n=this,r=document.querySelector(".template-content");if(this.conversionRules&&this.conversionRules.templates&&this.conversionRules.templates[t]){var a=this.conversionRules.templates[t],o="";Object.entries(a).forEach(function(t){var r=e(t,2),a=r[0],s=r[1];Array.isArray(s)?s.forEach(function(t){o+='\n                            <button class="template-btn text-left p-3 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200 text-sm"\n                                    data-text="'.concat(n.escapeHtml(t),'">\n                                <span class="block font-medium text-gray-700 dark:text-gray-300 mb-1">').concat(a,'</span>\n                                <span class="text-gray-600 dark:text-gray-400">').concat(t,"</span>\n                            </button>\n                        ")}):Object.entries(s).forEach(function(t){var r=e(t,2),s=r[0];r[1].forEach(function(t){o+='\n                                <button class="template-btn text-left p-3 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200 text-sm"\n                                        data-text="'.concat(n.escapeHtml(t),'">\n                                    <span class="block font-medium text-gray-700 dark:text-gray-300 mb-1">').concat(a," - ").concat(s,'</span>\n                                    <span class="text-gray-600 dark:text-gray-400">').concat(t,"</span>\n                                </button>\n                            ")})})}),r.innerHTML=o}else r.innerHTML='<p class="text-gray-500 dark:text-gray-400">テンプレートがありません</p>'}},{key:"applyTemplate",value:function(t){var e=t.dataset.text,n=document.querySelector(".input-text");n.value&&!n.value.endsWith("\n")&&(n.value+="\n"),n.value+=e,this.handleInput(n),n.focus()}},{key:"updateHistoryDisplay",value:function(){var t=this,e=document.querySelector(".history-list");if(0!==this.conversionHistory.length){var n=this.conversionHistory.map(function(e){var n=new Date(e.timestamp).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"});return'\n                    <div class="history-item p-3 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200 cursor-pointer"\n                         data-original="'.concat(t.escapeHtml(e.original),'"\n                         data-converted="').concat(t.escapeHtml(e.converted),'">\n                        <div class="flex justify-between items-start mb-1">\n                            <span class="text-xs text-gray-500 dark:text-gray-400">').concat(n,'</span>\n                            <span class="text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded">\n                                ').concat(e.type,'\n                            </span>\n                        </div>\n                        <div class="text-sm">\n                            <div class="text-gray-600 dark:text-gray-400 truncate">\n                                元: ').concat(e.original,'\n                            </div>\n                            <div class="text-gray-800 dark:text-gray-200 truncate">\n                                変換: ').concat(e.converted,"\n                            </div>\n                        </div>\n                    </div>\n                ")}).join("");e.innerHTML=n}else e.innerHTML='<p class="text-gray-500 dark:text-gray-400 text-center py-4">履歴がありません</p>'}},{key:"applyHistoryItem",value:function(t){var e=t.dataset.original,n=document.querySelector(".input-text");n.value=e,this.handleInput(n),n.focus()}},{key:"clearHistory",value:function(){confirm("変換履歴をすべて削除しますか？")&&(this.conversionHistory=[],this.saveHistory(),this.updateHistoryDisplay())}}],n&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,a,o}(),n=document.createElement("style");n.textContent="\n        .type-btn.active {\n            background-color: rgb(59 130 246);\n            color: white;\n            border-color: rgb(59 130 246);\n        }\n        \n        .template-tab.active {\n            border-color: rgb(59 130 246);\n            color: rgb(59 130 246);\n        }\n        \n        .dark .template-tab.active {\n            color: rgb(96 165 250);\n        }\n        \n        .history-list::-webkit-scrollbar {\n            width: 6px;\n        }\n        \n        .history-list::-webkit-scrollbar-track {\n            background: transparent;\n        }\n        \n        .history-list::-webkit-scrollbar-thumb {\n            background: rgba(156, 163, 175, 0.5);\n            border-radius: 3px;\n        }\n        \n        .dark .history-list::-webkit-scrollbar-thumb {\n            background: rgba(75, 85, 99, 0.5);\n        }\n    ",document.head.appendChild(n),document.addEventListener("DOMContentLoaded",function(){document.querySelector(".honorific-converter-tool")&&new t})}()})(),(()=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){var t,r,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.toStringTag||"@@toStringTag";function i(e,a,o,s){var i=a&&a.prototype instanceof l?a:l,u=Object.create(i.prototype);return n(u,"_invoke",function(e,n,a){var o,s,i,l=0,u=a||[],d=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(e,n){return o=e,s=0,i=t,p.n=n,c}};function v(e,n){for(s=e,i=n,r=0;!d&&l&&!a&&r<u.length;r++){var a,o=u[r],v=p.p,y=o[2];e>3?(a=y===n)&&(i=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=v&&((a=e<2&&v<o[1])?(s=0,p.v=n,p.n=o[1]):v<y&&(a=e<3||o[0]>n||n>y)&&(o[4]=e,o[5]=n,p.n=y,s=0))}if(a||e>1)return c;throw d=!0,n}return function(a,u,y){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&v(u,y),s=u,i=y;(r=s<2?t:i)||!d;){o||(s?s<3?(s>1&&(p.n=-1),v(s,i)):p.n=i:p.v=i);try{if(l=2,o){if(s||(a="next"),r=o[a]){if(!(r=r.call(o,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,s<2&&(s=0)}else 1===s&&(r=o.return)&&r.call(o),s<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=t}else if((r=(d=p.n<0)?i:e.call(n,p))!==c)break}catch(e){o=t,s=1,i=e}finally{l=1}}return{value:r,done:d}}}(e,o,s),!0),u}var c={};function l(){}function u(){}function d(){}r=Object.getPrototypeOf;var p=[][o]?r(r([][o]())):(n(r={},o,function(){return this}),r),v=d.prototype=l.prototype=Object.create(p);function y(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,n(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t}return u.prototype=d,n(v,"constructor",d),n(d,"constructor",u),u.displayName="GeneratorFunction",n(d,s,"GeneratorFunction"),n(v),n(v,s,"Generator"),n(v,o,function(){return this}),n(v,"toString",function(){return"[object Generator]"}),(e=function(){return{w:i,m:y}})()}function n(t,e,r,a){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}n=function(t,e,r,a){function s(e,r){n(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!a,configurable:!a,writable:!a}):t[e]=r:(s("next",0),s("throw",1),s("return",2))},n(t,e,r,a)}function r(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function a(t){return function(){var e=this,n=arguments;return new Promise(function(a,o){var s=t.apply(e,n);function i(t){r(s,a,o,i,c,"next",t)}function c(t){r(s,a,o,i,c,"throw",t)}i(void 0)})}}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}!function(){"use strict";var t=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.examplesData=null,this.currentScene="ビジネス",this.currentSubScene=null,this.favorites=[],this.storageKey="honorificExamplesFavorites",this.speechSynthesis=window.speechSynthesis,this.isSpeaking=!1,this.init()},n=[{key:"init",value:(s=a(e().m(function t(){return e().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.loadExamplesData();case 1:this.loadFavorites(),this.setupUI(),this.attachEventListeners(),this.displayScene(this.currentScene),t.n=3;break;case 2:t.p=2,t.v;case 3:return t.a(2)}},t,this,[[0,2]])})),function(){return s.apply(this,arguments)})},{key:"loadExamplesData",value:(r=a(e().m(function t(){var n,r;return e().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,fetch("/data/honorific-examples.json");case 1:return n=t.v,t.n=2,n.json();case 2:r=t.v,this.examplesData=r,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,this,[[0,3]])})),function(){return r.apply(this,arguments)})},{key:"loadFavorites",value:function(){var t=localStorage.getItem(this.storageKey);t&&(this.favorites=JSON.parse(t))}},{key:"saveFavorites",value:function(){localStorage.setItem(this.storageKey,JSON.stringify(this.favorites))}},{key:"setupUI",value:function(){var t=this;document.querySelectorAll(".honorific-examples-interactive").forEach(function(e){e.innerHTML='\n                    <div class="examples-container">\n                        <div class="examples-header mb-6">\n                            <h3 class="text-2xl font-bold text-gray-800 dark:text-gray-200 mb-4">\n                                シーン別敬語例文集\n                            </h3>\n                            <p class="text-gray-600 dark:text-gray-400 mb-4">\n                                様々なシーンでの敬語の使い方を学びましょう\n                            </p>\n                        </div>\n                        \n                        <div class="scene-navigation mb-6">\n                            <div class="scene-tabs flex gap-2 mb-4 flex-wrap">\n                                '.concat(Object.keys(t.examplesData.scenes).map(function(e){return'\n                                    <button class="scene-tab px-4 py-2 rounded-lg border-2 transition-all duration-200 '.concat(e===t.currentScene?"active":"",'"\n                                            data-scene="').concat(e,'">\n                                        ').concat(e,"\n                                    </button>\n                                ")}).join(""),'\n                            </div>\n                            \n                            <div class="subscene-tabs flex gap-2 flex-wrap">\n                                \x3c!-- サブシーンタブが動的に挿入されます --\x3e\n                            </div>\n                        </div>\n                        \n                        <div class="filter-section mb-4">\n                            <div class="flex gap-4 items-center flex-wrap">\n                                <input type="text" \n                                       class="search-input flex-1 min-w-[200px] px-4 py-2 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:border-blue-500 dark:focus:border-blue-400 transition-colors duration-200 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200"\n                                       placeholder="例文を検索...">\n                                <button class="favorites-only-btn px-4 py-2 border-2 border-gray-300 dark:border-gray-600 rounded-lg hover:border-yellow-500 dark:hover:border-yellow-400 transition-all duration-200">\n                                    <span class="flex items-center gap-2">\n                                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">\n                                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>\n                                        </svg>\n                                        お気に入り\n                                    </span>\n                                </button>\n                            </div>\n                        </div>\n                        \n                        <div class="examples-list space-y-4">\n                            \x3c!-- 例文カードが動的に挿入されます --\x3e\n                        </div>\n                        \n                        <div class="no-results hidden text-center py-8 text-gray-500 dark:text-gray-400">\n                            該当する例文が見つかりませんでした\n                        </div>\n                    </div>\n                ')})}},{key:"attachEventListeners",value:function(){var t=this;document.addEventListener("click",function(e){if(e.target.matches(".scene-tab"))t.selectScene(e.target.dataset.scene);else if(e.target.matches(".subscene-tab"))t.selectSubScene(e.target.dataset.subscene);else if(e.target.closest(".speak-btn")){var n=e.target.closest(".example-card");t.speakExample(n)}else if(e.target.closest(".favorite-btn")){var r=e.target.closest(".example-card");t.toggleFavorite(r.dataset.id)}else e.target.matches(".favorites-only-btn")?t.toggleFavoritesOnly(e.target):e.target.matches(".level-btn")&&t.selectLevel(e.target)}),document.addEventListener("input",function(e){e.target.matches(".search-input")&&t.filterExamples(e.target.value)})}},{key:"displayScene",value:function(t){this.currentScene=t,document.querySelectorAll(".scene-tab").forEach(function(e){e.classList.toggle("active",e.dataset.scene===t),e.classList.toggle("bg-blue-500",e.dataset.scene===t),e.classList.toggle("text-white",e.dataset.scene===t),e.classList.toggle("border-blue-500",e.dataset.scene===t)});var e=Object.keys(this.examplesData.scenes[t]);document.querySelector(".subscene-tabs").innerHTML=e.map(function(t,e){return'\n                <button class="subscene-tab px-3 py-1 text-sm rounded-md border transition-all duration-200 '.concat(0===e?"active bg-gray-700 text-white":"border-gray-300 dark:border-gray-600 hover:border-gray-400",'"\n                        data-subscene="').concat(t,'">\n                    ').concat(t,"\n                </button>\n            ")}).join(""),this.selectSubScene(e[0])}},{key:"selectSubScene",value:function(t){this.currentSubScene=t,document.querySelectorAll(".subscene-tab").forEach(function(e){var n=e.dataset.subscene===t;e.classList.toggle("active",n),e.classList.toggle("bg-gray-700",n),e.classList.toggle("text-white",n),e.classList.toggle("border-gray-300",!n),e.classList.toggle("dark:border-gray-600",!n)}),this.displayExamples()}},{key:"displayExamples",value:function(){var t=this,e=this.examplesData.scenes[this.currentScene][this.currentSubScene];document.querySelector(".examples-list").innerHTML=e.map(function(e){return t.createExampleCard(e)}).join(""),this.updateFavoriteStates()}},{key:"createExampleCard",value:function(t){var e=this.favorites.includes(t.id);return'\n                <div class="example-card bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border-2 border-transparent hover:border-blue-300 dark:hover:border-blue-700 transition-all duration-300"\n                     data-id="'.concat(t.id,'"\n                     data-tags="').concat(t.tags.join(","),'"\n                     data-situation="').concat(t.situation.toLowerCase(),'">\n                    \n                    <div class="flex justify-between items-start mb-4">\n                        <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-200">\n                            ').concat(t.situation,'\n                        </h4>\n                        <div class="flex gap-2">\n                            <button class="speak-btn p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200"\n                                    title="音声で聞く">\n                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">\n                                    <path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z" clip-rule="evenodd"/>\n                                </svg>\n                            </button>\n                            <button class="favorite-btn p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 ').concat(e?"text-yellow-500":"text-gray-400",'"\n                                    title="お気に入り">\n                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">\n                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>\n                                </svg>\n                            </button>\n                        </div>\n                    </div>\n                    \n                    <div class="example-levels space-y-3 mb-4">\n                        <div class="level-item" data-level="casual">\n                            <div class="flex items-center gap-2 mb-1">\n                                <span class="level-label text-xs font-medium px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded">\n                                    カジュアル\n                                </span>\n                                <button class="level-btn text-sm text-blue-600 dark:text-blue-400 hover:underline"\n                                        data-text="').concat(t.casual,'">\n                                    読み上げ\n                                </button>\n                            </div>\n                            <p class="text-gray-700 dark:text-gray-300 pl-4">\n                                「').concat(t.casual,'」\n                            </p>\n                        </div>\n                        \n                        <div class="level-item" data-level="polite">\n                            <div class="flex items-center gap-2 mb-1">\n                                <span class="level-label text-xs font-medium px-2 py-1 bg-blue-100 dark:bg-blue-900 rounded">\n                                    丁寧\n                                </span>\n                                <button class="level-btn text-sm text-blue-600 dark:text-blue-400 hover:underline"\n                                        data-text="').concat(t.polite,'">\n                                    読み上げ\n                                </button>\n                            </div>\n                            <p class="text-gray-700 dark:text-gray-300 pl-4">\n                                「').concat(t.polite,'」\n                            </p>\n                        </div>\n                        \n                        <div class="level-item" data-level="formal">\n                            <div class="flex items-center gap-2 mb-1">\n                                <span class="level-label text-xs font-medium px-2 py-1 bg-purple-100 dark:bg-purple-900 rounded">\n                                    フォーマル\n                                </span>\n                                <button class="level-btn text-sm text-blue-600 dark:text-blue-400 hover:underline"\n                                        data-text="').concat(t.formal,'">\n                                    読み上げ\n                                </button>\n                            </div>\n                            <p class="text-gray-700 dark:text-gray-300 pl-4">\n                                「').concat(t.formal,'」\n                            </p>\n                        </div>\n                    </div>\n                    \n                    <div class="explanation bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-3">\n                        <p class="text-sm text-blue-700 dark:text-blue-300">\n                            💡 ').concat(t.explanation,'\n                        </p>\n                    </div>\n                    \n                    <div class="tags flex gap-2 flex-wrap">\n                        ').concat(t.tags.map(function(t){return'\n                            <span class="tag text-xs px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded-full text-gray-600 dark:text-gray-400">\n                                #'.concat(t,"\n                            </span>\n                        ")}).join(""),"\n                    </div>\n                </div>\n            ")}},{key:"selectScene",value:function(t){this.displayScene(t)}},{key:"selectLevel",value:function(t){var e=t.dataset.text;this.speak(e)}},{key:"speakExample",value:function(t){var e=["casual","polite","formal"].map(function(e){var n=t.querySelector('.level-item[data-level="'.concat(e,'"] p'));return n?n.textContent.replace(/[「」]/g,""):""}).filter(function(t){return t});this.speakSequence(e)}},{key:"speak",value:function(t){var e=this;if(this.isSpeaking)return this.speechSynthesis.cancel(),void(this.isSpeaking=!1);var n=new SpeechSynthesisUtterance(t);n.lang="ja-JP",n.rate=.9,n.pitch=1,n.onstart=function(){e.isSpeaking=!0},n.onend=function(){e.isSpeaking=!1},this.speechSynthesis.speak(n)}},{key:"speakSequence",value:function(t){var e=this;if(this.isSpeaking)return this.speechSynthesis.cancel(),void(this.isSpeaking=!1);var n=0,r=function(){if(n>=t.length)e.isSpeaking=!1;else{var a=new SpeechSynthesisUtterance(t[n]);a.lang="ja-JP",a.rate=.9,a.pitch=1,a.onstart=function(){0===n&&(e.isSpeaking=!0)},a.onend=function(){n++,setTimeout(r,500)},e.speechSynthesis.speak(a)}};r()}},{key:"toggleFavorite",value:function(t){var e=this.favorites.indexOf(t);e>-1?this.favorites.splice(e,1):this.favorites.push(t),this.saveFavorites(),this.updateFavoriteStates()}},{key:"updateFavoriteStates",value:function(){var t=this;document.querySelectorAll(".example-card").forEach(function(e){var n=e.dataset.id,r=e.querySelector(".favorite-btn"),a=t.favorites.includes(n);r.classList.toggle("text-yellow-500",a),r.classList.toggle("text-gray-400",!a)})}},{key:"toggleFavoritesOnly",value:function(t){var e=t.classList.contains("active");t.classList.toggle("active",!e),t.classList.toggle("bg-yellow-500",!e),t.classList.toggle("text-white",!e),t.classList.toggle("border-yellow-500",!e),this.filterExamples(document.querySelector(".search-input").value)}},{key:"filterExamples",value:function(t){var e=this,n=document.querySelectorAll(".example-card"),r=document.querySelector(".favorites-only-btn").classList.contains("active"),a=t.toLowerCase(),o=0;n.forEach(function(t){var n=t.dataset.id,s=t.dataset.tags,i=t.dataset.situation,c=t.textContent.toLowerCase(),l=!0;r&&!e.favorites.includes(n)&&(l=!1),a&&l&&(l=c.includes(a)||s.includes(a)||i.includes(a)),t.style.display=l?"block":"none",l&&o++}),document.querySelector(".no-results").classList.toggle("hidden",o>0)}}],n&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r,s}(),n=document.createElement("style");n.textContent="\n        .scene-tab.active,\n        .subscene-tab.active {\n            background-color: rgb(59 130 246);\n            color: white;\n            border-color: rgb(59 130 246);\n        }\n        \n        .favorites-only-btn.active {\n            background-color: rgb(245 158 11);\n            color: white;\n            border-color: rgb(245 158 11);\n        }\n        \n        .example-card {\n            animation: fadeIn 0.3s ease-out;\n        }\n        \n        @keyframes fadeIn {\n            from {\n                opacity: 0;\n                transform: translateY(10px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n        \n        .speak-btn:hover svg,\n        .favorite-btn:hover svg {\n            transform: scale(1.1);\n        }\n        \n        .speak-btn svg,\n        .favorite-btn svg {\n            transition: transform 0.2s;\n        }\n    ",document.head.appendChild(n),document.addEventListener("DOMContentLoaded",function(){document.querySelector(".honorific-examples-interactive")&&new t})}()})(),(()=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function n(){var t,e,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.toStringTag||"@@toStringTag";function i(n,a,o,s){var i=a&&a.prototype instanceof l?a:l,u=Object.create(i.prototype);return r(u,"_invoke",function(n,r,a){var o,s,i,l=0,u=a||[],d=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(e,n){return o=e,s=0,i=t,p.n=n,c}};function v(n,r){for(s=n,i=r,e=0;!d&&l&&!a&&e<u.length;e++){var a,o=u[e],v=p.p,y=o[2];n>3?(a=y===r)&&(i=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=v&&((a=n<2&&v<o[1])?(s=0,p.v=r,p.n=o[1]):v<y&&(a=n<3||o[0]>r||r>y)&&(o[4]=n,o[5]=r,p.n=y,s=0))}if(a||n>1)return c;throw d=!0,r}return function(a,u,y){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&v(u,y),s=u,i=y;(e=s<2?t:i)||!d;){o||(s?s<3?(s>1&&(p.n=-1),v(s,i)):p.n=i:p.v=i);try{if(l=2,o){if(s||(a="next"),e=o[a]){if(!(e=e.call(o,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=t}else if((e=(d=p.n<0)?i:n.call(r,p))!==c)break}catch(e){o=t,s=1,i=e}finally{l=1}}return{value:e,done:d}}}(n,o,s),!0),u}var c={};function l(){}function u(){}function d(){}e=Object.getPrototypeOf;var p=[][o]?e(e([][o]())):(r(e={},o,function(){return this}),e),v=d.prototype=l.prototype=Object.create(p);function y(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,r(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t}return u.prototype=d,r(v,"constructor",d),r(d,"constructor",u),u.displayName="GeneratorFunction",r(d,s,"GeneratorFunction"),r(v),r(v,s,"Generator"),r(v,o,function(){return this}),r(v,"toString",function(){return"[object Generator]"}),(n=function(){return{w:i,m:y}})()}function r(t,e,n,a){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}r=function(t,e,n,a){function s(e,n){r(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!a,configurable:!a,writable:!a}):t[e]=n:(s("next",0),s("throw",1),s("return",2))},r(t,e,n,a)}function a(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function o(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var s=t.apply(e,n);function i(t){a(s,r,o,i,c,"next",t)}function c(t){a(s,r,o,i,c,"throw",t)}i(void 0)})}}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function i(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}!function(){"use strict";var t=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.quizData=null,this.currentLevel="beginner",this.currentQuiz=null,this.currentQuestionIndex=0,this.score=0,this.totalQuestions=0,this.answeredQuestions=[],this.wrongAnswers=[],this.reviewMode=!1,this.storageKey="honorificQuizData",this.init()},r=[{key:"init",value:(i=o(n().m(function t(){return n().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.loadQuizData();case 1:this.loadProgress(),this.setupEventListeners(),this.renderLevelSelector(),t.n=3;break;case 2:t.p=2,t.v;case 3:return t.a(2)}},t,this,[[0,2]])})),function(){return i.apply(this,arguments)})},{key:"loadQuizData",value:(a=o(n().m(function t(){var e,r;return n().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,fetch("/data/honorific-quiz-data.json");case 1:return e=t.v,t.n=2,e.json();case 2:r=t.v,this.quizData=r.quizData,t.n=4;break;case 3:t.p=3,t.v,this.quizData={beginner:[],intermediate:[],advanced:[]};case 4:return t.a(2)}},t,this,[[0,3]])})),function(){return a.apply(this,arguments)})},{key:"loadProgress",value:function(){var t=localStorage.getItem(this.storageKey);if(t){var e=JSON.parse(t);this.score=e.score||0,this.totalQuestions=e.totalQuestions||0,this.wrongAnswers=e.wrongAnswers||[],this.updateProgressDisplay()}}},{key:"saveProgress",value:function(){var t={score:this.score,totalQuestions:this.totalQuestions,wrongAnswers:this.wrongAnswers,lastUpdated:(new Date).toISOString()};localStorage.setItem(this.storageKey,JSON.stringify(t))}},{key:"setupEventListeners",value:function(){var t=this;document.addEventListener("click",function(e){e.target.matches(".level-selector button")?t.selectLevel(e.target.dataset.level):e.target.matches(".start-quiz-btn")?t.startQuiz():e.target.matches(".review-mistakes-btn")?t.startReviewMode():e.target.matches(".next-question-btn")?t.nextQuestion():e.target.matches(".finish-quiz-btn")&&t.finishQuiz()})}},{key:"renderLevelSelector",value:function(){var t=this;document.querySelectorAll(".honorific-quiz-enhanced").forEach(function(e){e.innerHTML='\n                    <div class="quiz-header mb-6">\n                        <h3 class="text-2xl font-bold text-gray-800 dark:text-gray-200 mb-4">敬語クイズ - レベル選択</h3>\n                        \n                        <div class="level-selector flex gap-4 mb-6">\n                            <button data-level="beginner" class="level-btn px-6 py-3 rounded-lg border-2 transition-all duration-200 '.concat("beginner"===t.currentLevel?"bg-blue-500 text-white border-blue-500":"border-gray-300 dark:border-gray-600 hover:border-blue-400",'">\n                                初級\n                            </button>\n                            <button data-level="intermediate" class="level-btn px-6 py-3 rounded-lg border-2 transition-all duration-200 ').concat("intermediate"===t.currentLevel?"bg-blue-500 text-white border-blue-500":"border-gray-300 dark:border-gray-600 hover:border-blue-400",'">\n                                中級\n                            </button>\n                            <button data-level="advanced" class="level-btn px-6 py-3 rounded-lg border-2 transition-all duration-200 ').concat("advanced"===t.currentLevel?"bg-blue-500 text-white border-blue-500":"border-gray-300 dark:border-gray-600 hover:border-blue-400",'">\n                                上級\n                            </button>\n                        </div>\n                        \n                        <div class="quiz-stats bg-gray-100 dark:bg-gray-800 rounded-lg p-4 mb-4">\n                            <div class="flex justify-between items-center">\n                                <div>\n                                    <p class="text-sm text-gray-600 dark:text-gray-400">総合スコア</p>\n                                    <p class="text-2xl font-bold text-gray-800 dark:text-gray-200">\n                                        <span class="score-display">').concat(t.score,'</span> / <span class="total-display">').concat(t.totalQuestions,'</span>\n                                    </p>\n                                </div>\n                                <div>\n                                    <p class="text-sm text-gray-600 dark:text-gray-400">正答率</p>\n                                    <p class="text-2xl font-bold text-gray-800 dark:text-gray-200">\n                                        <span class="accuracy-display">').concat(t.totalQuestions>0?Math.round(t.score/t.totalQuestions*100):0,'</span>%\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n                        \n                        <div class="action-buttons flex gap-4">\n                            <button class="start-quiz-btn px-6 py-3 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-medium transition-colors duration-200">\n                                クイズを開始\n                            </button>\n                            ').concat(t.wrongAnswers.length>0?'\n                                <button class="review-mistakes-btn px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium transition-colors duration-200">\n                                    間違えた問題を復習 ('.concat(t.wrongAnswers.length,"問)\n                                </button>\n                            "):"",'\n                        </div>\n                    </div>\n                    \n                    <div class="quiz-content-area"></div>\n                ')})}},{key:"selectLevel",value:function(t){this.currentLevel=t,this.renderLevelSelector()}},{key:"startQuiz",value:function(){this.reviewMode=!1,this.currentQuiz=function(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.quizData[this.currentLevel]),this.shuffleArray(this.currentQuiz),this.currentQuestionIndex=0,this.answeredQuestions=[],this.renderQuestion()}},{key:"startReviewMode",value:function(){var t=this;this.reviewMode=!0,this.currentQuiz=this.wrongAnswers.map(function(e){for(var n=0,r=Object.keys(t.quizData);n<r.length;n++){var a=r[n],o=t.quizData[a].find(function(t){return t.id===e});if(o)return o}}).filter(Boolean),0!==this.currentQuiz.length?(this.currentQuestionIndex=0,this.answeredQuestions=[],this.renderQuestion()):alert("復習する問題がありません。")}},{key:"renderQuestion",value:function(){var t=this.currentQuiz[this.currentQuestionIndex];document.querySelector(".quiz-content-area").innerHTML='\n                <div class="question-container">\n                    <div class="question-header mb-4">\n                        <div class="flex justify-between items-center mb-2">\n                            <span class="text-sm text-gray-600 dark:text-gray-400">\n                                問題 '.concat(this.currentQuestionIndex+1," / ").concat(this.currentQuiz.length,"\n                            </span>\n                            ").concat(this.reviewMode?'<span class="text-sm text-orange-600 dark:text-orange-400 font-bold">復習モード</span>':"",'\n                        </div>\n                        <div class="progress-bar w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full">\n                            <div class="progress-fill h-full bg-gradient-to-r from-purple-400 to-pink-500 rounded-full transition-all duration-500" \n                                 style="width: ').concat((this.currentQuestionIndex+1)/this.currentQuiz.length*100,'%"></div>\n                        </div>\n                    </div>\n                    \n                    <div class="question-section mb-6">\n                        <p class="text-lg text-gray-700 dark:text-gray-300 font-medium mb-4">\n                            ').concat(t.question,"\n                        </p>\n                        \n                        ").concat(t.sentence?'\n                            <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4 mb-4">\n                                <p class="text-gray-800 dark:text-gray-200 font-mono">\n                                    「'.concat(t.sentence,"」\n                                </p>\n                            </div>\n                        "):"","\n                        \n                        ").concat(t.category?'\n                            <span class="inline-block px-3 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full">\n                                '.concat(t.category,"\n                            </span>\n                        "):"",'\n                    </div>\n                    \n                    <div class="options-section space-y-3" data-question-id="').concat(t.id,'">\n                        ').concat(t.options.map(function(t,e){return'\n                            <button class="quiz-option w-full text-left p-4 rounded-lg border-2 border-gray-200 dark:border-gray-700 hover:border-blue-400 dark:hover:border-blue-600 transition-all duration-200"\n                                    data-correct="'.concat(t.correct,'"\n                                    data-explanation="').concat(t.explanation||"",'"\n                                    data-index="').concat(e,'">\n                                <div class="flex items-center">\n                                    <span class="option-indicator w-8 h-8 rounded-full border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center mr-3 text-sm font-bold">\n                                        ').concat(e+1,'\n                                    </span>\n                                    <span class="option-text text-gray-700 dark:text-gray-300">\n                                        ').concat(t.text,"\n                                    </span>\n                                </div>\n                            </button>\n                        ")}).join(""),'\n                    </div>\n                    \n                    <div class="result-section hidden mt-6">\n                        <div class="result-message p-4 rounded-lg mb-4">\n                            <p class="text-lg font-bold mb-2"></p>\n                            <p class="text-sm"></p>\n                        </div>\n                        \n                        ').concat(t.explanation?'\n                            <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-4">\n                                <h4 class="font-bold text-blue-700 dark:text-blue-300 mb-2">解説</h4>\n                                <p class="text-sm text-blue-600 dark:text-blue-400">\n                                    '.concat(t.explanation,"\n                                </p>\n                            </div>\n                        "):"",'\n                        \n                        <div class="action-buttons">\n                            ').concat(this.currentQuestionIndex<this.currentQuiz.length-1?'\n                                <button class="next-question-btn px-6 py-3 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-medium transition-colors duration-200">\n                                    次の問題へ\n                                </button>\n                            ':'\n                                <button class="finish-quiz-btn px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium transition-colors duration-200">\n                                    クイズを終了\n                                </button>\n                            ',"\n                        </div>\n                    </div>\n                </div>\n            "),this.attachQuestionListeners()}},{key:"attachQuestionListeners",value:function(){var t=this,e=document.querySelectorAll(".quiz-option"),n=!1;e.forEach(function(r){r.addEventListener("click",function(){if(!n){n=!0;var a=r.closest(".options-section").dataset.questionId,o="true"===r.dataset.correct,s=r.dataset.explanation;t.handleAnswer(a,o),e.forEach(function(t){var e=t.querySelector(".option-indicator");"true"===t.dataset.correct?(t.classList.add("border-green-500","dark:border-green-400","bg-green-50","dark:bg-green-900/20"),e.classList.add("bg-green-500","text-white"),e.innerHTML="✓"):t!==r||o||(t.classList.add("border-red-500","dark:border-red-400","bg-red-50","dark:bg-red-900/20"),e.classList.add("bg-red-500","text-white"),e.innerHTML="✗"),t.disabled=!0}),setTimeout(function(){var t=document.querySelector(".result-section"),e=t.querySelector(".result-message p:first-child"),n=t.querySelector(".result-message p:last-child");t.classList.remove("hidden"),o?(e.textContent="正解です！",e.className="text-lg font-bold mb-2 text-green-600 dark:text-green-400",n.textContent=s||"よく理解できています。"):(e.textContent="惜しい！",e.className="text-lg font-bold mb-2 text-red-600 dark:text-red-400",n.textContent=s||"もう一度考えてみましょう。")},500)}})})}},{key:"handleAnswer",value:function(t,e){if(this.answeredQuestions.push({id:t,correct:e}),this.reviewMode){if(e){var n=this.wrongAnswers.indexOf(t);n>-1&&this.wrongAnswers.splice(n,1)}}else if(this.totalQuestions++,e){this.score++;var r=this.wrongAnswers.indexOf(t);r>-1&&this.wrongAnswers.splice(r,1)}else this.wrongAnswers.includes(t)||this.wrongAnswers.push(t);this.saveProgress(),this.updateProgressDisplay()}},{key:"nextQuestion",value:function(){this.currentQuestionIndex++,this.renderQuestion()}},{key:"finishQuiz",value:function(){var t=this.answeredQuestions.filter(function(t){return t.correct}).length,e=this.answeredQuestions.length,n=Math.round(t/e*100);document.querySelector(".quiz-content-area").innerHTML='\n                <div class="quiz-results text-center">\n                    <h3 class="text-2xl font-bold text-gray-800 dark:text-gray-200 mb-6">\n                        '.concat(this.reviewMode?"復習":"クイズ",'結果\n                    </h3>\n                    \n                    <div class="result-stats bg-gray-100 dark:bg-gray-800 rounded-lg p-6 mb-6">\n                        <div class="grid grid-cols-3 gap-4">\n                            <div>\n                                <p class="text-sm text-gray-600 dark:text-gray-400">正解数</p>\n                                <p class="text-3xl font-bold text-green-600 dark:text-green-400">').concat(t,'</p>\n                            </div>\n                            <div>\n                                <p class="text-sm text-gray-600 dark:text-gray-400">問題数</p>\n                                <p class="text-3xl font-bold text-gray-800 dark:text-gray-200">').concat(e,'</p>\n                            </div>\n                            <div>\n                                <p class="text-sm text-gray-600 dark:text-gray-400">正答率</p>\n                                <p class="text-3xl font-bold ').concat(n>=80?"text-green-600 dark:text-green-400":n>=60?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",'">').concat(n,'%</p>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <div class="result-message mb-6">\n                        <p class="text-lg text-gray-700 dark:text-gray-300">\n                            ').concat(n>=80?"素晴らしい成績です！敬語をよく理解されています。":n>=60?"よく頑張りました！もう少しで完璧です。":"復習して、もう一度挑戦してみましょう！",'\n                        </p>\n                    </div>\n                    \n                    <button class="back-to-menu-btn px-6 py-3 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-medium transition-colors duration-200"\n                            onclick="location.reload()">\n                        メニューに戻る\n                    </button>\n                </div>\n            ')}},{key:"updateProgressDisplay",value:function(){var t=this,e=document.querySelectorAll(".score-display"),n=document.querySelectorAll(".total-display"),r=document.querySelectorAll(".accuracy-display");e.forEach(function(e){return e.textContent=t.score}),n.forEach(function(e){return e.textContent=t.totalQuestions}),r.forEach(function(e){e.textContent=t.totalQuestions>0?Math.round(t.score/t.totalQuestions*100):0})}},{key:"shuffleArray",value:function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=[t[n],t[e]];t[e]=r[0],t[n]=r[1]}}}],r&&s(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a,i}();document.addEventListener("DOMContentLoaded",function(){document.querySelector(".honorific-quiz-enhanced")&&new t})}()})();