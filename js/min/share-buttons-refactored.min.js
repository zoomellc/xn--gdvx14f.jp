var __awaiter=this&&this.__awaiter||function(t,e,o,i){return new(o||(o=Promise))(function(n,a){function c(t){try{s(i.next(t))}catch(t){a(t)}}function r(t){try{s(i.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,r)}s((i=i.apply(t,e||[])).next())})};import{createButton}from"./components/ui/Button";import{defaultNotification}from"./components/ui/NotificationManager";class ShareButtonsManager{constructor(){this.services=[{name:"Twitter",icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M22.46 6c-.85.38-1.77.64-2.73.76 1-.6 1.76-1.55 2.12-2.68-.93.55-1.96.95-3.06 1.17-.88-.94-2.13-1.53-3.51-1.53-2.66 0-4.81 2.16-4.81 4.81 0 .38.04.75.13 1.1-4-.2-7.54-2.11-9.91-5.02-.41.71-.65 1.53-.65 2.4 0 1.67.85 3.14 2.14 4.01-.79-.03-1.54-.24-2.19-.6v.06c0 2.33 1.66 4.28 3.86 4.72-.4.11-.83.17-1.27.17-.31 0-.62-.03-.92-.08.62 1.91 2.39 3.3 4.5 3.34-1.65 1.29-3.73 2.06-5.99 2.06-.39 0-.77-.02-1.15-.07 2.13 1.37 4.66 2.16 7.38 2.16 8.85 0 13.69-7.33 13.69-13.69 0-.21 0-.41-.01-.62.94-.68 1.76-1.53 2.4-2.5z"/></svg>',getUrl:(t,e)=>`https://twitter.com/intent/tweet?text=${encodeURIComponent(e)}&url=${encodeURIComponent(t)}`,color:"#1DA1F2"},{name:"Facebook",icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>',getUrl:t=>`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}`,color:"#1877F2"},{name:"LINE",icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"/></svg>',getUrl:(t,e)=>`https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(t)}&text=${encodeURIComponent(e)}`,color:"#00B900"}],this.init()}init(){"undefined"!=typeof document&&document.addEventListener("DOMContentLoaded",()=>{this.setupShareButtons()})}setupShareButtons(){document.querySelectorAll(".share-buttons").forEach(t=>{const e=t.getAttribute("data-url")||window.location.href,o=t.getAttribute("data-title")||document.title;t.innerHTML="",this.services.forEach(i=>{const n=createButton({icon:i.icon,variant:"icon",size:"medium",className:"share-button",ariaLabel:`${i.name}でシェア`,tooltip:`${i.name}でシェア`,tooltipPosition:"top",onClick:()=>this.share(i,e,o)}),a=n.getElement();a.style.color=i.color||"#666",a.style.padding="8px",n.appendTo(t)}),"share"in navigator&&createButton({icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/></svg>',variant:"icon",size:"medium",className:"share-button share-native",ariaLabel:"シェア",tooltip:"シェア",tooltipPosition:"top",onClick:()=>this.nativeShare(e,o)}).appendTo(t),createButton({icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>',variant:"icon",size:"medium",className:"share-button share-copy",ariaLabel:"リンクをコピー",tooltip:"リンクをコピー",tooltipPosition:"top",onClick:()=>this.copyLink(e)}).appendTo(t)})}share(t,e,o){const i=t.getUrl(e,o);window.open(i,"_blank","width=600,height=400,menubar=no,toolbar=no,resizable=yes"),void 0!==window.gtag&&window.gtag("event","share",{method:t.name,content_type:"article",item_id:e})}nativeShare(t,e){return __awaiter(this,void 0,void 0,function*(){try{yield navigator.share({title:e,url:t}),defaultNotification.success("シェアしました")}catch(t){"AbortError"!==t.name&&(console.error("Share failed:",t),defaultNotification.error("シェアに失敗しました"))}})}copyLink(t){return __awaiter(this,void 0,void 0,function*(){try{yield navigator.clipboard.writeText(t),defaultNotification.success("リンクをコピーしました",{duration:2e3})}catch(e){console.error("Copy failed:",e);const o=document.createElement("textarea");o.value=t,o.style.position="fixed",o.style.opacity="0",document.body.appendChild(o),o.select();try{document.execCommand("copy"),defaultNotification.success("リンクをコピーしました",{duration:2e3})}catch(t){defaultNotification.error("コピーに失敗しました")}document.body.removeChild(o)}})}addService(t){this.services.push(t),this.setupShareButtons()}removeService(t){this.services=this.services.filter(e=>e.name!==t),this.setupShareButtons()}}const shareButtons=new ShareButtonsManager;window.ShareButtons=shareButtons;export default shareButtons;