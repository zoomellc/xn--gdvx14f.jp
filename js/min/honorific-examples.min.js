!function(){"use strict";class e{constructor(){this.examplesData=null,this.currentScene="ビジネス",this.currentSubScene=null,this.favorites=[],this.storageKey="honorificExamplesFavorites",this.speechSynthesis=window.speechSynthesis,this.isSpeaking=!1,this.init()}async init(){try{await this.loadExamplesData(),this.loadFavorites(),this.setupUI(),this.attachEventListeners(),this.displayScene(this.currentScene)}catch(e){console.error("Failed to initialize examples:",e)}}async loadExamplesData(){try{const e=await fetch("/data/honorific-examples.json"),t=await e.json();this.examplesData=t}catch(e){console.error("Failed to load examples data:",e)}}loadFavorites(){const e=localStorage.getItem(this.storageKey);e&&(this.favorites=JSON.parse(e))}saveFavorites(){localStorage.setItem(this.storageKey,JSON.stringify(this.favorites))}setupUI(){document.querySelectorAll(".honorific-examples-interactive").forEach(e=>{e.innerHTML=`\n                    <div class="examples-container">\n                        <div class="examples-header mb-6">\n                            <h3 class="text-2xl font-bold text-gray-800 dark:text-gray-200 mb-4">\n                                シーン別敬語例文集\n                            </h3>\n                            <p class="text-gray-600 dark:text-gray-400 mb-4">\n                                様々なシーンでの敬語の使い方を学びましょう\n                            </p>\n                        </div>\n                        \n                        <div class="scene-navigation mb-6">\n                            <div class="scene-tabs flex gap-2 mb-4 flex-wrap">\n                                ${Object.keys(this.examplesData.scenes).map(e=>`\n                                    <button class="scene-tab px-4 py-2 rounded-lg border-2 transition-all duration-200 ${e===this.currentScene?"active":""}"\n                                            data-scene="${e}">\n                                        ${e}\n                                    </button>\n                                `).join("")}\n                            </div>\n                            \n                            <div class="subscene-tabs flex gap-2 flex-wrap">\n                                \x3c!-- サブシーンタブが動的に挿入されます --\x3e\n                            </div>\n                        </div>\n                        \n                        <div class="filter-section mb-4">\n                            <div class="flex gap-4 items-center flex-wrap">\n                                <input type="text" \n                                       class="search-input flex-1 min-w-[200px] px-4 py-2 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:border-blue-500 dark:focus:border-blue-400 transition-colors duration-200 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200"\n                                       placeholder="例文を検索...">\n                                <button class="favorites-only-btn px-4 py-2 border-2 border-gray-300 dark:border-gray-600 rounded-lg hover:border-yellow-500 dark:hover:border-yellow-400 transition-all duration-200">\n                                    <span class="flex items-center gap-2">\n                                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">\n                                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>\n                                        </svg>\n                                        お気に入り\n                                    </span>\n                                </button>\n                            </div>\n                        </div>\n                        \n                        <div class="examples-list space-y-4">\n                            \x3c!-- 例文カードが動的に挿入されます --\x3e\n                        </div>\n                        \n                        <div class="no-results hidden text-center py-8 text-gray-500 dark:text-gray-400">\n                            該当する例文が見つかりませんでした\n                        </div>\n                    </div>\n                `})}attachEventListeners(){document.addEventListener("click",e=>{if(e.target.matches(".scene-tab"))this.selectScene(e.target.dataset.scene);else if(e.target.matches(".subscene-tab"))this.selectSubScene(e.target.dataset.subscene);else if(e.target.closest(".speak-btn")){const t=e.target.closest(".example-card");this.speakExample(t)}else if(e.target.closest(".favorite-btn")){const t=e.target.closest(".example-card");this.toggleFavorite(t.dataset.id)}else e.target.matches(".favorites-only-btn")?this.toggleFavoritesOnly(e.target):e.target.matches(".level-btn")&&this.selectLevel(e.target)}),document.addEventListener("input",e=>{e.target.matches(".search-input")&&this.filterExamples(e.target.value)})}displayScene(e){this.currentScene=e,document.querySelectorAll(".scene-tab").forEach(t=>{t.classList.toggle("active",t.dataset.scene===e),t.classList.toggle("bg-blue-500",t.dataset.scene===e),t.classList.toggle("text-white",t.dataset.scene===e),t.classList.toggle("border-blue-500",t.dataset.scene===e)});const t=Object.keys(this.examplesData.scenes[e]);document.querySelector(".subscene-tabs").innerHTML=t.map((e,t)=>`\n                <button class="subscene-tab px-3 py-1 text-sm rounded-md border transition-all duration-200 ${0===t?"active bg-gray-700 text-white":"border-gray-300 dark:border-gray-600 hover:border-gray-400"}"\n                        data-subscene="${e}">\n                    ${e}\n                </button>\n            `).join(""),this.selectSubScene(t[0])}selectSubScene(e){this.currentSubScene=e,document.querySelectorAll(".subscene-tab").forEach(t=>{const a=t.dataset.subscene===e;t.classList.toggle("active",a),t.classList.toggle("bg-gray-700",a),t.classList.toggle("text-white",a),t.classList.toggle("border-gray-300",!a),t.classList.toggle("dark:border-gray-600",!a)}),this.displayExamples()}displayExamples(){const e=this.examplesData.scenes[this.currentScene][this.currentSubScene];document.querySelector(".examples-list").innerHTML=e.map(e=>this.createExampleCard(e)).join(""),this.updateFavoriteStates()}createExampleCard(e){const t=this.favorites.includes(e.id);return`\n                <div class="example-card bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border-2 border-transparent hover:border-blue-300 dark:hover:border-blue-700 transition-all duration-300"\n                     data-id="${e.id}"\n                     data-tags="${e.tags.join(",")}"\n                     data-situation="${e.situation.toLowerCase()}">\n                    \n                    <div class="flex justify-between items-start mb-4">\n                        <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-200">\n                            ${e.situation}\n                        </h4>\n                        <div class="flex gap-2">\n                            <button class="speak-btn p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200"\n                                    title="音声で聞く">\n                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">\n                                    <path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z" clip-rule="evenodd"/>\n                                </svg>\n                            </button>\n                            <button class="favorite-btn p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 ${t?"text-yellow-500":"text-gray-400"}"\n                                    title="お気に入り">\n                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">\n                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>\n                                </svg>\n                            </button>\n                        </div>\n                    </div>\n                    \n                    <div class="example-levels space-y-3 mb-4">\n                        <div class="level-item" data-level="casual">\n                            <div class="flex items-center gap-2 mb-1">\n                                <span class="level-label text-xs font-medium px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded">\n                                    カジュアル\n                                </span>\n                                <button class="level-btn text-sm text-blue-600 dark:text-blue-400 hover:underline"\n                                        data-text="${e.casual}">\n                                    読み上げ\n                                </button>\n                            </div>\n                            <p class="text-gray-700 dark:text-gray-300 pl-4">\n                                「${e.casual}」\n                            </p>\n                        </div>\n                        \n                        <div class="level-item" data-level="polite">\n                            <div class="flex items-center gap-2 mb-1">\n                                <span class="level-label text-xs font-medium px-2 py-1 bg-blue-100 dark:bg-blue-900 rounded">\n                                    丁寧\n                                </span>\n                                <button class="level-btn text-sm text-blue-600 dark:text-blue-400 hover:underline"\n                                        data-text="${e.polite}">\n                                    読み上げ\n                                </button>\n                            </div>\n                            <p class="text-gray-700 dark:text-gray-300 pl-4">\n                                「${e.polite}」\n                            </p>\n                        </div>\n                        \n                        <div class="level-item" data-level="formal">\n                            <div class="flex items-center gap-2 mb-1">\n                                <span class="level-label text-xs font-medium px-2 py-1 bg-purple-100 dark:bg-purple-900 rounded">\n                                    フォーマル\n                                </span>\n                                <button class="level-btn text-sm text-blue-600 dark:text-blue-400 hover:underline"\n                                        data-text="${e.formal}">\n                                    読み上げ\n                                </button>\n                            </div>\n                            <p class="text-gray-700 dark:text-gray-300 pl-4">\n                                「${e.formal}」\n                            </p>\n                        </div>\n                    </div>\n                    \n                    <div class="explanation bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-3">\n                        <p class="text-sm text-blue-700 dark:text-blue-300">\n                            💡 ${e.explanation}\n                        </p>\n                    </div>\n                    \n                    <div class="tags flex gap-2 flex-wrap">\n                        ${e.tags.map(e=>`\n                            <span class="tag text-xs px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded-full text-gray-600 dark:text-gray-400">\n                                #${e}\n                            </span>\n                        `).join("")}\n                    </div>\n                </div>\n            `}selectScene(e){this.displayScene(e)}selectLevel(e){const t=e.dataset.text;this.speak(t)}speakExample(e){const t=["casual","polite","formal"].map(t=>{const a=e.querySelector(`.level-item[data-level="${t}"] p`);return a?a.textContent.replace(/[「」]/g,""):""}).filter(e=>e);this.speakSequence(t)}speak(e){if(this.isSpeaking)return this.speechSynthesis.cancel(),void(this.isSpeaking=!1);const t=new SpeechSynthesisUtterance(e);t.lang="ja-JP",t.rate=.9,t.pitch=1,t.onstart=()=>{this.isSpeaking=!0},t.onend=()=>{this.isSpeaking=!1},this.speechSynthesis.speak(t)}speakSequence(e){if(this.isSpeaking)return this.speechSynthesis.cancel(),void(this.isSpeaking=!1);let t=0;const a=()=>{if(t>=e.length)return void(this.isSpeaking=!1);const s=new SpeechSynthesisUtterance(e[t]);s.lang="ja-JP",s.rate=.9,s.pitch=1,s.onstart=()=>{0===t&&(this.isSpeaking=!0)},s.onend=()=>{t++,setTimeout(a,500)},this.speechSynthesis.speak(s)};a()}toggleFavorite(e){const t=this.favorites.indexOf(e);t>-1?this.favorites.splice(t,1):this.favorites.push(e),this.saveFavorites(),this.updateFavoriteStates()}updateFavoriteStates(){document.querySelectorAll(".example-card").forEach(e=>{const t=e.dataset.id,a=e.querySelector(".favorite-btn"),s=this.favorites.includes(t);a.classList.toggle("text-yellow-500",s),a.classList.toggle("text-gray-400",!s)})}toggleFavoritesOnly(e){const t=e.classList.contains("active");e.classList.toggle("active",!t),e.classList.toggle("bg-yellow-500",!t),e.classList.toggle("text-white",!t),e.classList.toggle("border-yellow-500",!t),this.filterExamples(document.querySelector(".search-input").value)}filterExamples(e){const t=document.querySelectorAll(".example-card"),a=document.querySelector(".favorites-only-btn").classList.contains("active"),s=e.toLowerCase();let n=0;t.forEach(e=>{const t=e.dataset.id,l=e.dataset.tags,r=e.dataset.situation,i=e.textContent.toLowerCase();let o=!0;a&&!this.favorites.includes(t)&&(o=!1),s&&o&&(o=i.includes(s)||l.includes(s)||r.includes(s)),e.style.display=o?"block":"none",o&&n++}),document.querySelector(".no-results").classList.toggle("hidden",n>0)}}const t=document.createElement("style");t.textContent="\n        .scene-tab.active,\n        .subscene-tab.active {\n            background-color: rgb(59 130 246);\n            color: white;\n            border-color: rgb(59 130 246);\n        }\n        \n        .favorites-only-btn.active {\n            background-color: rgb(245 158 11);\n            color: white;\n            border-color: rgb(245 158 11);\n        }\n        \n        .example-card {\n            animation: fadeIn 0.3s ease-out;\n        }\n        \n        @keyframes fadeIn {\n            from {\n                opacity: 0;\n                transform: translateY(10px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n        \n        .speak-btn:hover svg,\n        .favorite-btn:hover svg {\n            transform: scale(1.1);\n        }\n        \n        .speak-btn svg,\n        .favorite-btn svg {\n            transition: transform 0.2s;\n        }\n    ",document.head.appendChild(t),document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".honorific-examples-interactive")&&new e})}();