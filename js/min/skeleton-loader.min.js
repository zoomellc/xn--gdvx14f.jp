!function(){"use strict";const e={init(){this.setupIntersectionObserver(),this.setupDynamicContentLoader(),this.setupImageLazyLoading()},createSkeletonCard(){const e=document.createElement("div");return e.className="skeleton-card bg-white w-full p-3 lg:max-w-full lg:flex mt-5 dark:bg-warmgray-900 overflow-hidden relative",e.innerHTML=`\n                <div class="skeleton-image skeleton-shimmer ${window.siteParams?.post?.thumbnail_width||"w-full"} ${window.siteParams?.post?.thumbnail_height||"h-48"} lg:h-44"></div>\n                <div class="relative pl-4 p-2 justify-between leading-normal max-w-full w-full">\n                    <div class="skeleton-title skeleton-shimmer h-7 w-4/5 mb-2 rounded"></div>\n                    <div class="skeleton-text space-y-2 pb-5">\n                        <div class="skeleton-line skeleton-shimmer h-4 w-full rounded"></div>\n                        <div class="skeleton-line skeleton-shimmer h-4 w-full rounded"></div>\n                        <div class="skeleton-line skeleton-shimmer h-4 w-3/4 rounded"></div>\n                    </div>\n                    <div class="skeleton-date skeleton-shimmer h-4 w-24 absolute right-0 bottom-0 rounded"></div>\n                </div>\n            `,e},createSkeletonWidget(){const e=document.createElement("div");return e.className="skeleton-widget bg-white p-4 mb-4 dark:bg-warmgray-900 rounded-lg",e.innerHTML='\n                <div class="skeleton-widget-title skeleton-shimmer h-6 w-32 mb-4 rounded"></div>\n                <div class="space-y-3">\n                    <div class="skeleton-widget-item skeleton-shimmer h-4 w-full rounded"></div>\n                    <div class="skeleton-widget-item skeleton-shimmer h-4 w-5/6 rounded"></div>\n                    <div class="skeleton-widget-item skeleton-shimmer h-4 w-4/5 rounded"></div>\n                    <div class="skeleton-widget-item skeleton-shimmer h-4 w-full rounded"></div>\n                </div>\n            ',e},setupIntersectionObserver(){const e=document.getElementById("articleList");if(!e)return;if(0===e.querySelectorAll("article").length)for(let t=0;t<5;t++)e.appendChild(this.createSkeletonCard());const t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target;t.classList.contains("skeleton-card")&&setTimeout(()=>{t.style.opacity="0",t.style.transform="scale(0.95)",setTimeout(()=>t.remove(),300)},100)}})},{rootMargin:"50px"});document.querySelectorAll(".skeleton-card").forEach(e=>{t.observe(e)})},setupDynamicContentLoader(){document.querySelectorAll("[data-widget-lazy]").forEach(e=>{const t=this.createSkeletonWidget();e.appendChild(t);const n=()=>{setTimeout(()=>{t.classList.add("skeleton-fade-out"),setTimeout(()=>t.remove(),300)},300)};if("IntersectionObserver"in window){const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(n(),t.unobserve(e.target))})},{rootMargin:"100px"});t.observe(e)}else n()})},setupImageLazyLoading(){document.querySelectorAll('img[loading="lazy"]').forEach(e=>{if(!e.complete){e.classList.add("skeleton-image-loading");const t=e.parentElement;if(t&&!t.querySelector(".skeleton-image-overlay")){const e=document.createElement("div");e.className="skeleton-image-overlay skeleton-shimmer",t.style.position="relative",t.appendChild(e)}e.addEventListener("load",()=>{e.classList.remove("skeleton-image-loading"),e.classList.add("skeleton-image-loaded");const t=e.parentElement?.querySelector(".skeleton-image-overlay");t&&(t.classList.add("skeleton-fade-out"),setTimeout(()=>t.remove(),300))}),e.addEventListener("error",()=>{e.classList.remove("skeleton-image-loading");const t=e.parentElement?.querySelector(".skeleton-image-overlay");t&&t.remove()})}})},showContentSkeleton(e,t=3){e.innerHTML="";for(let n=0;n<t;n++)e.appendChild(this.createSkeletonCard())},hideContentSkeleton(e){e.querySelectorAll(".skeleton-card").forEach((e,t)=>{setTimeout(()=>{e.classList.add("skeleton-fade-out"),setTimeout(()=>e.remove(),300)},50*t)})}};window.SkeletonLoader=e,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>e.init()):e.init(),document.addEventListener("htmx:beforeRequest",t=>{const n=t.detail.target;"articleList"===n.id&&e.showContentSkeleton(n)}),document.addEventListener("htmx:afterOnLoad",t=>{const n=t.detail.target;"articleList"===n.id&&(e.hideContentSkeleton(n),e.setupImageLazyLoading())})}();